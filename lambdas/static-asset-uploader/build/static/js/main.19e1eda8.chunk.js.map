{"version":3,"sources":["services/get-fragments.js","services/api.js","services/api-catalog.js","services/state.js","services/self.js","components/nav/ContentNavigation.jsx","pages/Home.jsx","components/nav/FunctionalNavigation.jsx","pages/GettingStarted.jsx","services/misc.js","pages/Dashboard.jsx","components/swagger/SwaggerUiLayout.jsx","pages/Apis.jsx","pages/Admin/Admin.jsx","pages/Admin/SideNav.jsx","pages/Admin/ApiManagement.jsx","components/header/Header.jsx","components/footer/Footer.jsx","components/AlertPopup.jsx","components/GetSdk.jsx","components/Modal.jsx","services/feedback.js","components/Feedback.jsx","components/ApisMenu.jsx","components/ApiSearch.jsx","index.js"],"names":["path","fragment","fragments","observable","jsx","fetch","then","response","text","parsedMarkdown","frontmatter","Object","objectSpread","react_default","a","createElement","with_html_default","escapeHtml","source","body","renderers","attributes","cachedClient","catalogPromiseCache","subscriptionsPromiseCache","apiKeyPromiseCache","link","_ref","href","props","objectWithoutProperties","test","assign","target","rel","Link","to","awsRegion","window","config","region","cognitoRegion","cognitoUserPoolId","userPoolId","cognitoIdentityPoolId","identityPoolId","cognitoClientId","userPoolClientId","cognitoDomain","userPoolDomain","initApiGatewayClient","arguments","length","undefined","accessKeyId","secretAccessKey","sessionToken","apigClientFactory","newClient","accessKey","secretKey","apigw","apiGatewayClient","Promise","resolve","poller","setInterval","clearInterval","updateAllUserData","bustCache","promises","updateUsagePlansAndApisList","updateSubscriptions","updateApiKey","isAdmin","push","app","get","_ref2","data","store","visibility","updateVisibility","all","apiList","loaded","usagePlans","_ref$data","apiGateway","reduce","acc","usagePlan","apis","forEach","api","_","cloneDeep","concat","generic","catch","getApi","apiId","selectIt","stage","thisApi","allApis","find","id","toString","subscriptionsOrPromise","subscriptions","_ref3","apiKeyOrPromise","apiKey","_ref4","value","mapUsageByDate","usage","usedOrRemaining","dates","keys","items","apiKeyId","apiKeyUsage","startDate","apiKeyDate","Date","Array","isArray","map","date","setDate","getDate","item","toConsumableArray","mapApiKeyUsageByDate","dailyUsage","used","remaining","sort","parseInt","AWS","cognitoUser","notifications","initialize","this","clear","reset","_this","defaults","_len","_key","key","set","resetUserData","reactTo","triggerFn","effectFn","reaction","action","usagePlanId","subscribed","sub","updateSubscriptionStatus","logo","specificLogo","headers","Accept","redirect","ok","fetchApiImage","isAuthenticated","idToken","jwt_decode","includes","login","reject","location","hash","replace","split","param","localStorage","setItem","setCredentials","error","getLoginRedirectUrl","protocol","host","getLogoutRedirectUrl","preferred_role","params","IdentityPoolId","Logins","defineProperty","RoleArn","credentials","CognitoIdentityCredentials","refresh","console","post","logout","redirectUrl","ContentNavigation","observer","_React$Component","_getPrototypeOf2","classCallCheck","args","possibleConstructorReturn","getPrototypeOf","call","apply","getCognitoUrl","type","redirectUri","inherits","createClass","adminMenu","className","style","cursor","onClick","sizes","src","srcSet","alt","insertAuthMenu","React","Component","HomePage","registerText","role","Fragment","components_nav_ContentNavigation","itemProp","tabIndex","insertRegisterLink","aria-hidden","FunctionalNavigation","components_nav_FunctionalNavigation","class","marginTop","GettingStarted","toTitleCase","string","firstLetter","allOtherLetters","slice","toUpperCase","toLowerCase","loadUsage","canvasId","start","getFullYear","getMonth","toJSON","end","fetchUsage","result","ctx","document","getElementById","JSON","stringify","labels","d","toLocaleDateString","weekday","year","month","day","max","Math","chartConfig","datasets","label","quota","period","lineTension","backgroundColor","borderColor","pointBackgroundColor","pointBorderColor","borderWidth","pointRadius","pointHoverRadius","options","scales","yAxes","ticks","beginAtZero","suggestedMax","Chart","Grid","container","Row","Column","paddingTop","Header_Header","size","background","border","padding","color","borderRadius","Divider","filter","index","width","widescreen","marginBottom","Dashboard_Title","throttle","Message","info","rateLimit","burstLimit","content","Loader","active","Title","firstApiName","swagger","title","List","Item","extraApiCount","Popup","trigger","on","position","EmptyReplacement","specSelectors","InfoReplacement","description","SwaggerUiLayout_SubscriptionButtons","SubscriptionButtons","state","delete","put","SwaggerLayoutPlugin","components","InfoContainer","AuthorizeBtnContainer","SchemesContainer","ServersContainer","FilterContainer","ModelWrapper","Model","Models","SvgAssets","operations","ApisPage","updateApi","match","swaggerUiConfig","dom_id","plugins","supportedSubmitMethods","spec","onComplete","uiHandler","preauthorizeApiKey","SwaggerUI","errorHeader","errorBody","Admin","_Component","BrowserRouter","display","flex","overflow","SideNav","src_AdminRoute","exact","component","ApiManagement","Menu","inverted","vertical","borderless","attached","as","modalOpen","errors","fileInput","createRef","uploadAPISpec","event","preventDefault","swaggerObject","anyFailures","files","current","setState","prev","_loop","i","f","file","reader","FileReader","onload","e","name","YAML","parse","res","status","setTimeout","getApiVisibility","readAsText","deleteAPISpec","_api","toJS","myHash","genApi","updateLocalApiGatewayApis","apisList","updatedApi","parity","updatedApis","stateApi","showApiGatewayApi","subscribable","hideApiGatewayApi","genericId","showAllApiGatewayApis","hideAllApiGatewayApis","updateApiGatewayApi","isSdkGenerationConfigurable","toggleSdkGeneration","sdkGeneration","tableSort","first","second","localeCompare","genericTableSort","firstIndex","secondIndex","list","usagePlanSort","renderNoApis","Table","Cell","colSpan","_this2","numberOfApis","numberofVisibleApis","Button","basic","paddingLeft","paddingRight","minWidth","Icon","_this3","accumulator","usagePlanName","unsubscribable","renderHeader","restApiId","renderRow","renderHeaderVisibilityButton","_this4","collapsing","disabled","_this5","celled","Header","fullWidth","HeaderCell","sorted","Body","sortByUsagePlan","Modal","closeIcon","closeOnEscape","closeOnDimmerClick","onClose","floated","open","Content","Form","onSubmit","Field","htmlFor","accept","multiple","ref","header","Footer","version","baseRegistriesVersion","height","xmlns","viewBox","data-name","dangerouslySetInnerHTML","__html","itemScope","itemType","Segment","right","margin","top","flexDirection","notify","onDismiss","notification","Dropdown","GetSdk_Dropdown","pointing","sdkTypes","configurationProperties","modal","GetSdkModal","getSdk","confirmDownload","friendlyName","downloadingSdk","inline","toggleDropdown","prevState","visible","hideDropdown","classList","contains","button","addEventListener","removeEventListener","children","_React$Component2","isDisabled","entries","fields","slicedToArray","handleChange","newState","handleSubmit","close","obj","property","required","icon","Input","placeholder","onChange","Actions","sdkType","parameters","stageName","queryParams","dataUri","fileName","downloadLinkElement","setAttribute","appendChild","click","removeChild","downloadFile","_ref$compact","compact","_ref$negative","negative","_ref$floating","floating","_ref$icon","_ref$header","_ref$content","addNotification","message","finally","GlobalModal","closeModal","openModal","modalBody","modalProps","bind","assertThisInitialized","submitFeedback","client","initialState","formOpen","feedbackSubmitted","Feedback","_this$state","centered","transform","borderTopLeftRadius","borderTopRightRadius","TextArea","positive","PureComponent","isActive","selectedApiId","selectedStage","loadingApis","hasGatewayApis","hasGenericApis","url","overflowY","ApiSubsection","listOfApis","GenericApiSubsection","_ref2$selectedStage","resultRenderer","ApiSearch","createSearchCategories","categories","Subscribable","results","Not Subscribable","searchable","_ref2$stage","log","handleResultSelect","handleSearchChange","_ref5","_ref5$search","search","searchRest","isLoading","rest","resetComponent","re","RegExp","escapeRegExp","isMatch","filteredResults","memo","_ref6","prevProps","loading","_this$state$search","components_ApisMenu","Search","category","onResultSelect","showNoResults","onSearchChange","debounce","leading","feedbackEnabled","AdminRoute","Route","render","Redirect","App","valid","getItem","exp","init","hashRoute","substring","history","pushState","components_header_Header","Modal_GlobalModal","Switch","Home","queryString","Dashboard","Apis","components_footer_Footer","components_Feedback","AlertPopup","ReactDOM","src_App"],"mappings":"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","file":"static/js/main.19e1eda8.chunk.js","sourcesContent":["// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// react-router\nimport { Link } from 'react-router-dom'\n\n// mobx\nimport { observable } from 'mobx'\n\n// markdown parsing\nimport frontmatter from 'front-matter'\nimport Markdown from 'react-markdown/with-html'\n\nexport const fragments = observable({})\n\nloadHtml('/custom-content/content-fragments/GettingStarted.md', 'GettingStarted')\n\n/**\n * \n * Pre-load the custom-content markdown, parses its frontmatter, and renders it as JSX. This method is asynchronous and doesn't actually return anything -- instead, it acts on a MobX Observable -- the fragment. The fragment is an object with a `jsx` property that maps to the rendered component, and any number of other properties collected from the front-matter.\n * \n * @param {String} path   Path to the file to load in. Should be a markdown file.\n * @param {String} fragment   Name of the fragment. Determines where rendered data gets stored.\n * \n * @returns {Object} \n */\nfunction loadHtml(path, fragment) {\n  // if we want to display a loading indicator, this would be where\n  fragments[fragment] = { jsx: () => null }\n\n  fetch(path).then(response => response.text().then(text => {\n    let parsedMarkdown = frontmatter(text)\n\n    fragments[fragment] = {\n      jsx: () => (\n        <Markdown \n          escapeHtml={false} \n          source={parsedMarkdown.body}\n          renderers={renderers}\n        />\n      ),\n      ...parsedMarkdown.attributes\n    }\n  }))\n}\n\n/**\n * Renderers is a map of node type to component. \n * \n * In this case, we only override links. Any time react-markdown tries to render a link, it'll render this component. Normal links will work, but the cause a full page reload. We don't want that, so we can replacing them with react-router Links. However, replacing external links with react-router Links causes them to not work at all. We don't want that either, so we attempt to determine if a link is external or not, and use `Link` or `a` appropriately.\n */\nconst renderers = {\n  link: ({ href, ...props }) => {\n    // if absolute url, use an `a` tag\n    // https://stackoverflow.com/a/19709846/4060061\n    if (/^(?:[a-z]+:)?\\/\\//i.test(href))\n      return <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" {...props} />\n\n    // replace links with react-router-dom tags so that they \n    return <Link to={href} {...props} />\n  }\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport AWS from 'aws-sdk'\n\nexport const awsRegion = window.config.region\nexport const cognitoRegion = window.config.region\nexport const cognitoUserPoolId = window.config.userPoolId\nexport const cognitoIdentityPoolId = window.config.identityPoolId\nexport const cognitoClientId = window.config.userPoolClientId\nexport const cognitoDomain = window.config.userPoolDomain\n\nAWS.config.region = cognitoRegion\n\nlet cachedClient\n\nexport function initApiGatewayClient({ accessKeyId, secretAccessKey, sessionToken } = {}) {\n  cachedClient = window.apigClientFactory.newClient({\n    accessKey: accessKeyId,\n    secretKey: secretAccessKey,\n    sessionToken: sessionToken,\n    region: awsRegion\n  })\n\n  window.apigw = cachedClient\n}\n\nexport function apiGatewayClient() {\n  if (cachedClient) return Promise.resolve(cachedClient)\n  \n  return new Promise(resolve => {\n    const poller = setInterval(() => {\n      if (cachedClient) {\n        clearInterval(poller)\n        resolve(cachedClient)\n      }\n    }, 100)\n  })\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _ from 'lodash'\n\nimport { apiGatewayClient } from './api'\nimport { store } from './state'\nimport { isAdmin } from './self'\n\n/* Catalog and API Utils */\n\n/**\n * \n * Does all operations to get user data at once.\n * \n * @param {Boolean} bustCache=true   Ignore the cache and re-make the calls? Defaults to true.\n */\nexport function updateAllUserData(bustCache = true) {\n  let promises = [\n    updateUsagePlansAndApisList(bustCache),\n    updateSubscriptions(bustCache),\n    updateApiKey(bustCache)\n  ]\n\n  if(isAdmin())\n    promises.push(updateVisibility(bustCache))\n\n  return Promise.all(promises)\n}\n\n/**\n * \n * Update the catalog for the current user. Both request and response are cached, so unless the cache is busted, this should only ever make one network call.\n * \n * @param {Boolean} [bustCache=false]   Ignore the cache and re-make the network call. Defaults to false.\n * \n */\nexport function updateUsagePlansAndApisList(bustCache = false) {\n  // if we've already tried, just return that promise\n  if (!bustCache && catalogPromiseCache) return catalogPromiseCache\n\n  store.apiList.loaded = false\n\n  return catalogPromiseCache = apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/catalog', {}, {}, {}))\n    .then(({ data = [] }) => {\n      store.usagePlans = data.apiGateway\n      store.apiList = {\n        loaded: true,\n        apiGateway: getApiGatewayApisFromUsagePlans(store.usagePlans), // MUST create\n        generic: data.generic\n      }\n    })\n    .catch(() => {\n      store.usagePlans = null\n      store.apiList = {\n        loaded: true,\n        apiGateway: [],\n        generic: []\n      }\n    })\n}\nlet catalogPromiseCache // WARNING: Don't touch this. Should only be used by updateCatalogAndApisList.\n\n/**\n * A function that takes an input usage plans and creates an list of apis out of it.\n * \n * - Makes sure each api has a non-recursive 'usagePlan' object\n * \n * returns an array of apis\n */\nfunction getApiGatewayApisFromUsagePlans(usagePlans) {\n  return usagePlans.reduce((acc, usagePlan) => {\n\n    usagePlan.apis.forEach(api => {\n      api.usagePlan = _.cloneDeep(usagePlan)\n      // remove the apis from the cloned usagePlan so we don't go circular\n      delete api.usagePlan.apis\n    })\n\n    return acc.concat(usagePlan.apis)\n  }, [])\n}\n\n/**\n * Return the API with the provided apiId. Can also provide the special strings \"FIRST\" or \"ANY\" to get the first API returned. Can select the api returned as a side-effect.\n * \n * @param {String} apiId   An apiId or the special strings 'FIRST' or 'ANY'. 'FIRST' and 'ANY' both return the first api encountered.\n * @param {Boolean} [selectIt=false]   If true, sets the found API as the current 'selected' API.\n */\nexport function getApi(apiId, selectIt = false, stage, cacheBust = false) {\n  return updateUsagePlansAndApisList(cacheBust)\n    .then(() => {\n      let thisApi\n\n      let allApis = [].concat(store.apiList.apiGateway, store.apiList.generic)\n  \n      if (allApis.length) {\n        if (apiId === 'ANY' || apiId === 'FIRST') {\n          thisApi = allApis[0]\n        } else {\n          thisApi = allApis.find(api => api.id.toString() === apiId)\n        }\n\n        if (stage) {\n          thisApi = store.apiList.apiGateway.find(api => api.id.toString() === apiId && api.stage === stage)\n        }\n      }\n\n      if (selectIt) store.api = thisApi\n\n      return thisApi\n    })\n}\n\nexport function updateVisibility(cacheBust = false) {\n    return apiGatewayClient()\n        .then(app => app.get('/admin/catalog/visibility', {}, {}, {}))\n        .then(({data}) => (store.visibility = data))\n}\n\n/* Subscription Utils */\n\n/**\n * Fetch and update subscriptions store. Uses caching to determine if it should actually fetch or return the stored result.\n * \n * @param {Boolean} [bustCache=false]   Ignore the cache and re-make the network call. Defaults to false.\n */\nexport function updateSubscriptions(bustCache = false) {\n  let subscriptionsOrPromise = store.subscriptions.length ? store.subscriptions : subscriptionsPromiseCache\n  if (!bustCache && subscriptionsOrPromise) return Promise.resolve(subscriptionsOrPromise)\n\n  return subscriptionsPromiseCache = apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/subscriptions', {}, {}, {}))\n    .then(({ data }) => (store.subscriptions = data))\n}\nlet subscriptionsPromiseCache // WARNING: Don't touch this. Should only be used by updateCatalogAndApisList.\n\nexport function getSubscribedUsagePlan(usagePlanId) {\n  return store.subscriptions.find(sub => sub.id === usagePlanId)\n}\n\nexport function subscribe(usagePlanId) {\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.put('/subscriptions/' + usagePlanId, {}, {}))\n    .then(() => updateSubscriptions(true))\n}\n\nexport function unsubscribe(usagePlanId) {\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.delete(`/subscriptions/${usagePlanId}`, {}, {}))\n    .then(() => updateSubscriptions(true))\n}\n\n/**\n * \n * Fetches and updates the apiKey in the store. Both request and response are cached, so unless the cache is busted, this should only ever make one network call.\n * \n */\nexport function updateApiKey(bustCache) {\n  let apiKeyOrPromise = store.apiKey ? store.apiKey : apiKeyPromiseCache\n  if (!bustCache && apiKeyOrPromise) return Promise.resolve(apiKeyOrPromise)\n\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/apikey', {}, {}, {}))\n    .then(({data}) => (store.apiKey = data.value))\n}\nlet apiKeyPromiseCache\n\nexport function fetchUsage(usagePlanId) {\n  const date = new Date()\n  const start = new Date(date.getFullYear(), date.getMonth(), 1).toJSON().split('T')[0]\n  const end = date.toJSON().split('T')[0]\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/subscriptions/' + usagePlanId + '/usage', { start, end }, {}))\n}\n\nexport function mapUsageByDate(usage, usedOrRemaining) {\n  const dates = {}\n  Object.keys(usage.items).forEach(apiKeyId => {\n    const apiKeyUsage = mapApiKeyUsageByDate(usage.items[apiKeyId], usage.startDate, usedOrRemaining)\n\n    // handles the bizarre case that the user has more than one api key\n    // currently not possible (and my never be), so we probably don't need it\n    apiKeyUsage.forEach(dailyUsage => {\n      const date = dailyUsage[0]\n      const used = dailyUsage[1]\n      const remaining = dailyUsage[2]\n      \n      if (!dates[date])\n      dates[date] = { used: 0, remaining: 0 }\n\n      dates[date].used += used\n      dates[date].remaining += remaining\n    })\n  })\n  \n  const usageByDate = Object.keys(dates).sort().map(date => [\n    parseInt(date, 10), \n    dates[date].used, \n    dates[date].remaining \n  ])\n  \n  return usageByDate\n}\n\nfunction mapApiKeyUsageByDate(apiKeyUsage, startDate) {\n  const apiKeyDate = new Date(startDate)\n  \n  if (apiKeyUsage && !Array.isArray(apiKeyUsage[0]))\n    apiKeyUsage = [apiKeyUsage]\n  \n  return apiKeyUsage.map((usage) => {\n    const date = apiKeyDate.setDate(apiKeyDate.getDate())\n    const item = [date, ...usage]\n    apiKeyDate.setDate(apiKeyDate.getDate() + 1)\n    return item\n  })\n}\n\n/* Marketplace integration */\n\nexport function confirmMarketplaceSubscription(usagePlanId, token) {\n  if (!usagePlanId) {\n    return\n  }\n  \n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.put('/marketplace-subscriptions/' + usagePlanId, {}, {\"token\" : token}))\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { observable, reaction } from 'mobx'\nimport _ from 'lodash'\n\nimport { getSubscribedUsagePlan } from 'services/api-catalog'\n\n/**\n * A function that returns a new object contain the default store\n */\nfunction storeDefaults() {\n  return {\n    api: undefined,\n    apiKey: undefined,\n    \n    apiList: {\n      loaded: false,\n      apiGateway: [],\n      generic: []\n    },\n\n    cognitoUser: undefined,\n\n    usagePlans: [],\n\n    subscriptions: [],\n\n    notifications: [],\n\n    visibility: {\n      apiGateway: [],\n      generic: {}\n    }\n  }\n}\n\n/**\n * Trick for logging the store: clone the object. i.e. _.cloneDeep(store) or JSON.parse(JSON.stringify(store))\n */\nexport const store = observable({\n  ...(storeDefaults()),\n\n  initialize() {\n    Object.assign(this, storeDefaults())\n\n    return this\n  },\n\n  /**\n   * Reset the entire store to the original values\n   */\n  clear() {\n    return this.initialize()\n  },\n\n  /**\n   * Reset specific keys on the store to their initial values\n   * \n   * @param {string[]} keys   The keys that should be reset. Accepts lodash paths. (e.g. )\n   */\n  reset(...keys) {\n    const defaults = storeDefaults()\n    keys.forEach(key =>_.set(this, key, _.get(defaults, key)))\n    return this\n  },\n\n  resetUserData() {\n    this.reset('apiKey', 'cognitoUser', 'subscriptions')\n  }\n})\n\n/**\n * \n * A short-hand function for creating reactions with protections against cyclical errors.\n * \n * @param {Function} triggerFn   A function that determines when fire the effectFn and what to pass to the effectFn.\n * @param {Function} effectFn   The side-effect to run when the data tracked by the triggerFn is changed.\n * \n * A note on MobX reactions: the side effect will \"only react to data that was accessed in the data expression\" and will only fire \"when the data returned by the expression has changed\". (https://mobx.js.org/refguide/reaction.html)\n */\nfunction reactTo(triggerFn, effectFn) {\n  // note -- had issues with cyclical reactions in the past\n  // the comments below will fix them if they come up again\n  // DO NOT REMOVE THEM\n\n  // function restartReaction() {\n    reaction(\n      triggerFn,\n      (data, action) => {\n        // action.dispose() // clear this \"listener\" so we don't cycle\n        \n        effectFn(data, action)\n\n        // restartReaction() // restart the reaction after doing stuff to the data\n      }\n    )\n  // }\n\n  // restartReaction()\n}\n\nreactTo(\n  () => ({ subscriptions: store.subscriptions, usagePlans: store.usagePlans }),\n  ({ usagePlans }) => {\n    updateSubscriptionStatus(usagePlans)\n  }\n)\n\nreactTo(\n  () => [].concat(store.apiList.apiGateway, store.apiList.generic),\n  apiList => {\n    fetchApiImage(apiList)\n  }\n)\n\n/**\n * \n */\nfunction fetchApiImage(apiList) {\n  apiList.forEach(api => {\n    if (!api.logo) {\n      let specificLogo = `/custom-content/api-logos/${api.id}_${api.stage}.png`\n  \n      // fetch automatically follows redirects; setting redirect to `manual` prevents this\n      // we need to prevent it so that we can accurately determine if the image exists\n      fetch(specificLogo, { headers: { Accept: \"image/png\" }, redirect: \"manual\" }).then(response => {\n        if (response.ok)\n          api.logo = specificLogo\n\n        else api.logo = '/custom-content/api-logos/default.png'\n      })\n    }\n  })\n}\n\n/**\n * A helper function that simple re-builds the subscribed status for each api in the catalog.\n * \n * Should be run every time either the catalog updates or the \n */\nfunction updateSubscriptionStatus(usagePlans) {\n  if (usagePlans)\n    usagePlans.forEach(usagePlan => {\n      let subscribed = !!getSubscribedUsagePlan(usagePlan.id)\n      usagePlan.subscribed = subscribed\n\n      usagePlan.apis.forEach(api => api.subscribed = subscribed)\n    })\n}\n\nexport default store.initialize()\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport AWS from 'aws-sdk'\n\n// services\nimport { store } from 'services/state'\nimport { updateAllUserData } from 'services/api-catalog'\nimport { initApiGatewayClient, apiGatewayClient, cognitoDomain, cognitoIdentityPoolId, cognitoUserPoolId, cognitoClientId, cognitoRegion } from 'services/api'\nimport * as jwt_decode from \"jwt-decode\";\n\nexport function isAuthenticated() {\n  return store.idToken\n}\n\nexport function isAdmin() {\n  return store.idToken &&\n  `${jwt_decode(store.idToken)['cognito:preferred_role']}`.includes('-CognitoAdminRole-')\n}\n\nexport function init() {\n  initApiGatewayClient() // init a blank client (will get overwritten if we have creds)\n\n  // attempt to refresh credentials from active session\n\n  let idToken\n  let parsedToken\n  let valid = false\n\n  try {\n    idToken = localStorage.getItem(cognitoUserPoolId)\n    if (idToken) { // this `if` prevents console.error spam\n      parsedToken = jwt_decode(idToken)\n      valid = parsedToken.exp * 1000 > new Date()\n    }\n  } catch (error) {\n    console.error(error)\n  }\n\n  if (valid) {\n    store.idToken = idToken\n    setCredentials()\n  } else {\n    logout()\n  }\n}\n\nexport function login() {\n  return new Promise((resolve, reject) => {\n    let idToken, accessToken, username\n\n    try {\n      window.location.hash\n        .replace(/^#/, '')\n        .split('&')\n        .map(param => param.split('='))\n        .forEach(param => {\n          // record the id_token and access_token\n          if (param[0] === 'id_token') idToken = param[1]\n          if (param[0] === 'access_token') accessToken = param[1]\n        })\n\n      if (idToken) { // we get both, we set both, but we only really care about the idToken\n        username = jwt_decode(idToken)['cognito:username']\n\n        localStorage.setItem(cognitoUserPoolId, idToken)\n\n        store.idToken = idToken\n\n        setCredentials()\n\n        resolve(idToken)\n      }\n    } catch (error) {\n      reject(error)\n    }\n  })\n}\n\nexport const getLoginRedirectUrl = () => `${window.location.protocol}//${window.location.host}/index.html?action=login`\nexport const getLogoutRedirectUrl = () => `${window.location.protocol}//${window.location.host}/index.html?action=logout`\n\nfunction setCredentials() {\n  let preferred_role = jwt_decode(store.idToken)['cognito:preferred_role']\n  let params = {\n    IdentityPoolId: cognitoIdentityPoolId,\n    Logins: {\n      [`cognito-idp.${cognitoRegion}.amazonaws.com/${cognitoUserPoolId}`]: store.idToken\n    }\n  }\n\n  if (preferred_role)\n    params.RoleArn = preferred_role\n\n  AWS.config.credentials = new AWS.CognitoIdentityCredentials(params)\n\n  return new Promise((resolve, reject) => {\n    AWS.config.credentials.refresh((error) => {\n      if (error) {\n        console.error(error)\n        return reject(error)\n      }\n\n      initApiGatewayClient(AWS.config.credentials)\n      updateAllUserData()\n  \n      return apiGatewayClient()\n        .then(apiGatewayClient => apiGatewayClient.post('/signin', {}, {}, {}))\n    })\n  })\n}\n\nexport function logout() {\n  if (store.idToken) {\n    store.resetUserData()\n    localStorage.clear()\n\n    if (cognitoDomain) {\n      // redirect to cognito to log out there, too\n      const redirectUrl = getLogoutRedirectUrl()\n      window.location = `${cognitoDomain}/logout?client_id=${cognitoClientId}&logout_uri=${redirectUrl}`\n    }\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { observer } from 'mobx-react'\r\nimport './ContentNavigation.scss';\r\n\r\nimport { isAdmin, isAuthenticated, logout, getLoginRedirectUrl } from 'services/self'\r\nimport { cognitoDomain, cognitoClientId } from '../../services/api'\r\nimport { store } from 'services/state'\r\n\r\nexport const ContentNavigation = observer(\r\n  class ContentNavigation extends React.Component {\r\n    getCognitoUrl = (type) => {\r\n      let redirectUri = getLoginRedirectUrl()\r\n      return `${cognitoDomain}/${type}?response_type=token&client_id=${cognitoClientId}&redirect_uri=${redirectUri}`\r\n    }\r\n\r\n    insertAuthMenu() {\r\n      var adminMenu = isAdmin() ? (\r\n        <li className=\"vl-content-header__action\"><p><Link to=\"/admin\">Beheer</Link></p></li>\r\n      ) : \"\";\r\n\r\n      var apiKey = store.apiKey ? (\r\n        <li className=\"vl-content-header__action\"><p>API Key: <span id=\"api-key\">{store.apiKey}</span></p></li>\r\n      ) : \"\";\r\n\r\n      return isAuthenticated() ?\r\n        (\r\n          <ul className=\"vl-content-header__actions\">\r\n            {adminMenu}\r\n            {apiKey}\r\n            <li className=\"vl-content-header__action\"><p><a style={{cursor: 'pointer'}} onClick={logout}>Afmelden</a></p></li>\r\n          </ul>\r\n        ) : (\r\n          <ul className=\"vl-content-header__actions\">\r\n            <li className=\"vl-content-header__action\"><p><a href={this.getCognitoUrl('login')}>Aanmelden</a></p></li>\r\n          </ul>\r\n        )\r\n    }\r\n\r\n    render() {\r\n      return <header id=\"vlaanderen-content-nav\"  className=\"vl-content-header vl-content-header--has-actions vl-content-header--large vl-content-header--show-mobile vl-content-header--alt\">\r\n      <div className=\"vl-content-header__wrapper\">\r\n        <picture className=\"vl-content-header__bg\">\r\n          <img sizes=\"100vw\" src=\"/custom-content/img/header_aiv.jpg\" srcSet=\"/custom-content/img/header_aiv.jpg 320w, /custom-content/img/header_aiv.jpg 1024w, /custom-content/img/header_aiv.jpg 1600w\" alt=\"agentschap Informatie Vlaanderen - API Aanbod\" />\r\n        </picture>\r\n        <div className=\"vl-layout\">\r\n          {this.insertAuthMenu()}\r\n          <div className=\"vl-content-header__content\">\r\n            <div className=\"vl-content-header__logo-wrapper\">\r\n              <a className=\"vl-content-header__entity-logo vl-content-header__entity-logo--small\">\r\n                <span className=\"vl-content-header__entity-logo__prefix\">Agentschap</span>\r\n                <span className=\"vl-content-header__entity-logo__title\">Informatie Vlaanderen</span>\r\n              </a>\r\n            </div>\r\n            <h2 className=\"vl-content-header__title \">\r\n              <span className=\"vl-content-header__title__content\">API Aanbod</span>\r\n            </h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n    }\r\n  }\r\n)\r\n\r\nexport default ContentNavigation\r\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { observer } from 'mobx-react'\n\nimport { Link } from 'react-router-dom'\n\nimport { isAuthenticated, getLoginRedirectUrl } from 'services/self'\nimport { cognitoDomain, cognitoClientId } from '../services/api'\n\nimport ContentNavigation from '../components/nav/ContentNavigation'\n\nexport const HomePage = observer(\n  class HomePage extends React.Component {\n    redirectUri = getLoginRedirectUrl()\n\n    insertRegisterLink() {\n      var registerText = (\n        <article role=\"none\">\n          <h3 className=\"vl-spotlight__title\">Registreren</h3>\n          <p className=\"vl-spotlight__subtitle\">Ik wil mijzelf registreren als ontwikkelaar</p>\n          <div className=\"vl-spotlight__text\"></div>\n        </article>)\n\n      return isAuthenticated() ?\n        (\n          <Link to=\"/apis\" className=\"vl-spotlight\">\n            {registerText}\n          </Link>\n        ) : (\n          <a href={`${cognitoDomain}/signup?response_type=token&client_id=${cognitoClientId}&redirect_uri=${this.redirectUri}`} className=\"vl-spotlight\">\n            {registerText}\n          </a>\n        )\n    }\n\n    render() {\n      return <React.Fragment>\n        <ContentNavigation />\n\n        <div className=\"vl-page\">\n          <main id=\"main\" itemProp=\"mainContentOfPage\" role=\"main\" tabIndex=\"0\" className=\"vl-main-content\">\n            <div className=\"vl-region vl-region--no-space-bottom\">\n              <div className=\"vl-layout\">\n                <header className=\"wp-pt-heading\">\n                    <div className=\"wp-pt-heading__title-wrapper\">\n                    <h1 className=\"wp-pt-heading__title vl-title vl-title--h1\">Basisregisters Vlaanderen</h1>\n                  </div>\n                  <div className=\"vl-grid\">\n                    <div className=\"vl-col--9-12 vl-col--12-12--s\">\n                      <div className=\"wp-pt-heading__content\">\n                        <div className=\"vl-typography\">\n                          <p className=\"vl-introduction\">\n                            Bent u op zoek naar authentieke gegevensbronnen? Dan bent u bij <strong>Informatie Vlaanderen</strong> aan het juiste adres.\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </header>\n              </div>\n            </div>\n\n            <div className=\"vl-region\">\n              <div className=\"vl-layout\">\n                <div className=\"vl-grid vl-grid--is-stacked\">\n                  <div className=\"vl-col--12-12\">\n                    <div className=\"vl-grid vl-grid--is-stacked\">\n                      <div className=\"vl-col--12-12\">\n           Bla!\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"vl-region vl-region--alt\">\n              <div className=\"vl-layout\">\n                <div className=\"vl-grid\">\n                  <div className=\"vl-col--4-12 vl-col--12-12--s\">\n                    {this.insertRegisterLink()}\n                  </div>\n                  \n                  <div className=\"vl-col--4-12 vl-col--12-12--s\">\n                    <Link to=\"/getting-started\" className=\"vl-spotlight\">\n                      <article role=\"none\">\n                        <h3 className=\"vl-spotlight__title\">Handleiding</h3>\n                        <p className=\"vl-spotlight__subtitle\">Hoe maak ik gebruik van de beschikbare API's?</p>\n                        <div className=\"vl-spotlight__text\"></div>\n                      </article>\n                    </Link>\n                  </div>\n\n                  <div className=\"vl-col--4-12 vl-col--12-12--s\">\n                    <Link to=\"/apis\" className=\"vl-spotlight\">\n                      <article role=\"none\">\n                        <h3 className=\"vl-spotlight__title\">Aanbod</h3>\n                        <p className=\"vl-spotlight__subtitle\">Welke API's zijn er?</p>\n                        <div className=\"vl-spotlight__text\"></div>\n                      </article>\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"vl-region vl-region--overlap\">\n              <div className=\"vl-layout\">\n                <div className=\"vl-grid\">\n                  <div className=\"vl-col--12-12\">\n                    <div className=\"vl-grid vl-grid--is-stacked\">\n                      <div className=\"vl-col--12-12\">\n                        <div className=\"vl-contact-data\">\n                          <div className=\"vl-grid vl-grid--is-stacked\">\n                            <div className=\"vl-col--4-12 vl-col--12-12--m\">\n                              <div role=\"presentation\" className=\"vl-infoblock\">\n                                <header role=\"presentation\" className=\"vl-infoblock__header\">\n                                  <span aria-hidden=\"true\" className=\"vl-icon vl-vi vl-vi-contacts vl-infoblock__header__icon\"></span>\n                                  <h2 className=\"vl-infoblock__title\">Contact</h2>\n                                </header>\n                              </div>\n                            </div>\n                            <div className=\"vl-col--7-12 vl-push--1-12 vl-col--12-12--m vl-push--reset--m\">\n                              <div className=\"vl-properties\">\n                                <dl className=\"vl-properties__list\">\n                                  <dt className=\"vl-properties__label\">Adres</dt>\n                                  <dd className=\"vl-properties__data\">\n                                    Herman Teirlinckgebouw\n                                    <br/>Havenlaan 88\n                                    <br/>1000 Brussel, België\n                                  </dd>\n                                  <dt className=\"vl-properties__label\">Telefoon</dt>\n                                  <dd className=\"vl-properties__data\">\n                                    <p><a href=\"tel:+3292761500\" className=\"vl-link\">Bel 09 276 15 00</a></p>\n                                    <p>Bereikbaar elke werkdag tussen 9 en 19 uur</p>\n                                  </dd>\n                                  <dt className=\"vl-properties__label\">E-mail</dt>\n                                  <dd className=\"vl-properties__data\">\n                                    <p><a href=\"https://www.vlaanderen.be/nl/vlaamse-overheid/contact/stuur-een-e-mail\" className=\"vl-link\">Stuur een e-mail</a></p>\n                                    <p>Antwoord binnen 2 werkdagen</p>\n                                  </dd>\n                                </dl>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"vl-col--12-12\">\n                        <div className=\"vl-col--12-12\">\n                          <hr className=\"vl-u-hr vl-u-hr--wave\" />\n                        </div>\n                      </div>\n                      \n                      <div className=\"vl-col--12-12\">\n                        <div className=\"vl-contact-data\">\n                          <div className=\"vl-grid vl-grid--is-stacked\">\n                            <div className=\"vl-col--4-12 vl-col--12-12--m\">\n                              <div role=\"presentation\" className=\"vl-infoblock\">\n                                <header role=\"presentation\" className=\"vl-infoblock__header\">\n                                  <span aria-hidden=\"true\" className=\"vl-icon vl-vi vl-vi-chat vl-infoblock__header__icon\"></span>\n                                  <h2 className=\"vl-infoblock__title\">Een klacht of melding?</h2>\n                                </header>\n                              </div>\n                            </div>\n                            <div className=\"vl-col--7-12 vl-push--1-12 vl-col--12-12--m vl-push--reset--m\">\n                              <div className=\"vl-grid vl-grid--is-stacked\">\n                                <div className=\"vl-col--8-12 vl-col--12-12--m\">\n                                  <div className=\"vl-typography\">\n                                    <p>Bent u niet tevreden over de werking van de Vlaamse overheid? Bent u het niet eens met een beslissing in een dossier? Neem contact op met de bevoegde dienst.</p>\n                                    <p><a href=\"https://www.vlaanderen.be/een-klacht-over-een-vlaamse-overheidsdienst\" className=\"vl-link\">Meer over de klachtenprocedure</a></p>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </main>\n        </div>\n      </React.Fragment>\n    }\n  }\n)\n\nexport default HomePage\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { observer } from 'mobx-react'\r\nimport './FunctionalNavigation.scss';\r\n\r\nimport { isAdmin, isAuthenticated, logout, getLoginRedirectUrl } from 'services/self'\r\nimport { cognitoDomain, cognitoClientId } from '../../services/api'\r\nimport { store } from 'services/state'\r\n\r\nexport const FunctionalNavigation = observer(\r\n  class FunctionalNavigation extends React.Component {\r\n    getCognitoUrl = (type) => {\r\n      let redirectUri = getLoginRedirectUrl()\r\n      return `${cognitoDomain}/${type}?response_type=token&client_id=${cognitoClientId}&redirect_uri=${redirectUri}`\r\n    }\r\n\r\n    insertAuthMenu() {\r\n      var adminMenu = isAdmin() ? (\r\n        <li className=\"vl-functional-header__action\"><p><Link to=\"/admin\">Beheer</Link></p></li>\r\n      ) : \"\";\r\n\r\n      var apiKey = store.apiKey ? (\r\n        <li className=\"vl-content-header__action\"><p>API Key: <span id=\"api-key\">{store.apiKey}</span></p></li>\r\n      ) : \"\";\r\n\r\n      return isAuthenticated() ?\r\n        (\r\n          <ul>\r\n            {adminMenu}\r\n            {apiKey}\r\n            <li className=\"vl-functional-header__action\"><p><a onClick={logout}>Afmelden</a></p></li>\r\n          </ul>\r\n        ) : (\r\n          <ul>\r\n            <li className=\"vl-functional-header__action\"><p><a href={this.getCognitoUrl('login')}>Aanmelden</a></p></li>\r\n          </ul>\r\n        )\r\n    }\r\n\r\n    render() {\r\n      return <header id=\"vlaanderen-functional-nav\" className=\"vl-functional-header vl-functional-header--has-actions\" role=\"banner\">\r\n        <div className=\"vl-layout\">\r\n          <div className=\"vl-functional-header__row\">\r\n            <div className=\"vl-functional-header__actions\">\r\n              {this.insertAuthMenu()}\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n    }\r\n  }\r\n)\r\n\r\nexport default FunctionalNavigation\r\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\nimport { Link } from 'react-router-dom'\n\nimport { observer } from 'mobx-react'\nimport { fragments } from 'services/get-fragments'\n\nimport FunctionalNavigation from '../components/nav/FunctionalNavigation'\n\nexport default observer(() => (\n  <div>\n    <FunctionalNavigation />\n\n    <div className=\"vl-page\">\n      <main id=\"main\" itemProp=\"mainContentOfPage\" role=\"main\" tabIndex=\"0\" className=\"vl-main-content\">\n        <div className=\"vl-region vl-region--no-space-bottom\">\n          <div className=\"vl-layout\">\n            <header className=\"wp-pt-heading\">\n              <div className=\"wp-pt-heading__parent\">\n                <Link to=\"/\" className=\"router-link-active vl-link vl-link--bold\">Overzicht</Link>\n              </div>\n              <div className=\"wp-pt-heading__title-wrapper\">\n                <h1 className=\"wp-pt-heading__title vl-title vl-title--h1\">Handleiding</h1>\n              </div>\n              <div className=\"vl-grid\">\n                <div className=\"vl-col--9-12 vl-col--12-12--s\">\n                  <div className=\"wp-pt-heading__content\">\n                    <div className=\"vl-typography\">\n                      <p className=\"vl-introduction\">\n                        Hoe ga ik aan de slag met dit <strong>portaal</strong> en de <strong>API's</strong>?.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </header>\n          </div>\n        </div>\n\n        <div className=\"vl-region\">\n          <div className=\"vl-layout\">\n            <div class=\"vl-typography\" style={{ marginTop: 20 }}>\n\n              <fragments.GettingStarted.jsx />\n              \n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n))\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nexport function getQueryString() {\n  const { search: q } = window.location\n\n  if (!q) return {}\n\n  return (/^[?#]/.test(q) ? q.slice(1) : q)\n    .split('&')\n    .reduce((params, param) => {\n      let [key, value] = param.split('=');\n      params[key] = value ? decodeURIComponent(value) : '';\n      return params;\n    }, {})\n}\n\nexport function toTitleCase(string) {\n  let firstLetter = string[0]\n  let allOtherLetters = string.slice(1)\n\n  return firstLetter.toUpperCase() + allOtherLetters.toLowerCase()\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\nimport { Grid, Header, Popup, Loader, Message, List, Divider } from 'semantic-ui-react'\n\nimport Chart from 'chart.js'\nimport { fetchUsage, mapUsageByDate } from 'services/api-catalog'\nimport { toTitleCase } from 'services/misc'\n\nimport { observer } from 'mobx-react'\n\nimport { store } from 'services/state'\n\nimport _ from 'lodash'\n\nfunction loadUsage(usagePlan, canvasId) {\n  fetchUsage(usagePlan.id)\n    .then((result) => {\n      const data = mapUsageByDate(result.data, 'used')\n      const ctx = document.getElementById(canvasId)\n\n      let oldDataString = JSON.stringify(_.get(usagePlan, 'usage.data', {}))\n      let newDataString = JSON.stringify(data)\n\n      if (oldDataString !== newDataString)\n        usagePlan.usage = { data }\n\n      const labels = data.map(d => new Date(d[0]).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' }))\n      const used = data.map(d => d[1])\n      const remaining = data.map(d => d[2])\n      const max = Math.max(...used, ...remaining)\n\n      const chartConfig = {\n        type: 'line',\n        data: {\n          labels,\n          datasets: [\n            {\n              label: `Requests used` + (usagePlan.quota ? ` (per ${toTitleCase(usagePlan.quota.period)})` : ''),\n              data: used,\n              lineTension: 0,\n              backgroundColor: '#00bfff',\n              borderColor: '#00bfff',\n              pointBackgroundColor: 'transparent',\n              pointBorderColor: 'transparent',\n              borderWidth: 2,\n              pointRadius: 10,\n              pointHoverRadius: 10\n\n            },\n            {\n              label: `Remaining requests` + (usagePlan.quota ? ` (per ${toTitleCase(usagePlan.quota.period)})` : ''),\n              data: remaining,\n              lineTension: 0,\n              backgroundColor: 'transparent',\n              borderColor: 'red',\n              pointBackgroundColor: 'transparent',\n              pointBorderColor: 'transparent',\n              borderWidth: 2,\n              pointRadius: 10,\n              pointHoverRadius: 10\n            }\n          ]\n        },\n        options: { \n          scales: { yAxes: [ { ticks: {\n            beginAtZero: true,\n            suggestedMax: max + (max * 0.02)\n          } } ] }\n        }\n      }\n\n      new Chart(ctx, chartConfig)\n    })\n    .catch((error) => {\n      console.error(error)\n      if (!usagePlan.usage)\n        usagePlan.usage = { }\n\n      usagePlan.usage.error = error\n    })\n}\n\nexport default observer(() => {\n  return (\n    <Grid container>\n      <Grid.Row>\n        <Grid.Column style={{ paddingTop: \"40px\" }}>\n          <Header size=\"medium\">API Key</Header>\n          <code style={{\n            background: \"black\",\n            border: \"1px solid gray\",\n            padding: \"7px 8px\",\n            color: \"lightgray\",\n            borderRadius: \"5px\"\n          }}>\n            {store.apiKey}\n          </code>\n        </Grid.Column>\n      </Grid.Row>\n      <Divider />\n      <Grid.Row>\n\n        {store.usagePlans\n          .filter(usagePlan => usagePlan.subscribed && usagePlan.apis.length)\n          .map((usagePlan, index) => {\n            let canvasId = `api-usage-chart-container-${usagePlan.id}` + index\n\n            loadUsage(usagePlan, canvasId)\n\n            return (\n              <Grid.Column width={16} widescreen={8} key={usagePlan.id} style={{ marginBottom: \"40px\" }}>\n                <Title apis={usagePlan.apis} />\n                {usagePlan.throttle && (\n                  <Message info>\n                    <p>\n                      Requests limited to {usagePlan.throttle.rateLimit} per second, and {usagePlan.throttle.burstLimit} in a burst.\n                    </p>\n                  </Message>\n                )}\n                {!usagePlan.usage ? (\n                  <Loader active />\n                ) : (\n                    usagePlan.error ? (\n                      <Message error content={usagePlan.error.toString()} />\n                    ) : null\n                  )}\n                <canvas id={canvasId} />\n              </Grid.Column>\n            )\n          })}\n      </Grid.Row>\n    </Grid>\n  )\n})\n\nconst Title = ({ apis }) => {\n  let firstApiName = apis[0].swagger.info.title\n\n  let apiList = (\n    <List> \n      { apis.reduce((acc, api) => acc.concat(\n        <List.Item key={api.id}>{api.swagger.info.title}</List.Item>\n      ), []) } \n    </List>\n  )\n\n  let extraApiCount = apis.length - 1\n\n  return (\n    <Header size=\"medium\">\n      Usage for {extraApiCount ? (\n        <Popup\n          trigger={ <a style={{ cursor: \"pointer\" }}>{firstApiName} and {extraApiCount} more...</a> }\n          content={ apiList }\n          on={['hover', 'click']}\n          position=\"right center\"\n        />\n      ) : (\n        firstApiName\n      )}\n    </Header>\n  )\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// services\nimport { subscribe, unsubscribe } from 'services/api-catalog'\nimport { isAuthenticated } from 'services/self'\n\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state.js'\n\nimport './SwaggerUiLayout.scss'\n\n// Create the plugin that provides our layout component\nexport const SwaggerLayoutPlugin = () => {\n  return {\n    components: {\n      InfoContainer: InfoReplacement,\n      AuthorizeBtnContainer: EmptyReplacement,\n      SchemesContainer: EmptyReplacement,\n      ServersContainer: EmptyReplacement,\n      FilterContainer: EmptyReplacement,\n      ModelWrapper: EmptyReplacement,\n      Model: EmptyReplacement,\n      Models: EmptyReplacement,\n      SvgAssets: EmptyReplacement,\n      operations: EmptyReplacement,\n    }\n  }\n}\n\nconst EmptyReplacement = observer(({ specSelectors }) => { return (<div className=\"remove-swagger\">WTF</div>) })\n\nconst InfoReplacement = observer(({ specSelectors }) => {\n  const host = specSelectors.host()\n\n  var description = '';\n\n  switch (host) {\n    case 'api.basisregisters.vlaanderen':\n      description = (\n        <div className=\"vl-typography vl-u-spacer--medium\">\n          <p>De Basisregisters Vlaanderen API stelt u in staat om alles te weten te komen rond:</p>\n          <ul>\n            <li>de Belgische gemeenten;</li>\n            <li>de Belgische postcodes;</li>\n            <li>de Vlaamse straatnamen;</li>\n            <li>de Vlaamse adressen;</li>\n            <li>de Vlaamse gebouwen en gebouweenheden;</li>\n            <li>de Vlaamse percelen;</li>\n            <li>de Vlaamse organisaties en organen;</li>\n            <li>de Vlaamse dienstverlening;</li>\n          </ul>\n          <p>Basisregisters Vlaanderen is de authentieke bron rond al bovenstaande gegevens met uitzondering van gemeenten, postcodes en percelen, die wij aanbieden als referentie bron.</p>\n       \n          <p><a href=\"https://docs.basisregisters.vlaanderen.be\" className=\"vl-link vl-link--block\"><span aria-hidden=\"true\" className=\"vl-icon vl-vi vl-vi-arrow-right-fat vl-link__icon vl-link__icon--before\"></span>Bekijk de documentatie</a></p>\n        </div>\n      )\n      break;\n    \n      default:\n      description = ''\n  }\n\n  return (\n    <div>\n      <h2 className=\"vl-title vl-title--h2\">{store.api.swagger.info.title}</h2>\n      {description}\n      <SubscriptionButtons />\n    </div>\n  )\n})\n\nconst SubscriptionButtons = observer(class SubscriptionButtons extends React.Component {\n  state = {}\n\n  render() {\n    const { api } = store\n\n    return (\n      (api && isAuthenticated()) ? !api.generic ? (\n        api.subscribed ? (\n          <button onClick={() => unsubscribe(api.usagePlan.id)} className=\"vl-button vl-button--error\">\n            Afmelden van deze API\n          </button>\n        ) : (\n          <button onClick={() => subscribe(api.usagePlan.id)} className=\"vl-button\">\n            Van deze API gebruik maken\n          </button>\n        )\n      ) : <div>This API is not configured for subscription from the portal.</div> : null\n    )\n  }\n})\n\nexport default SwaggerLayoutPlugin","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\nimport { Link } from 'react-router-dom'\n\nimport SwaggerUI from 'swagger-ui'\nimport 'swagger-ui/dist/swagger-ui.css'\n\nimport { isAuthenticated } from 'services/self'\nimport { updateUsagePlansAndApisList, getApi } from 'services/api-catalog';\n\nimport SwaggerLayoutPlugin from 'components/swagger/SwaggerUiLayout'\n\nimport { store } from 'services/state.js'\nimport { observer } from 'mobx-react'\n\nimport FunctionalNavigation from '../components/nav/FunctionalNavigation'\n\nexport default observer(class ApisPage extends React.Component {\n  componentDidMount() { this.updateApi().then(() => updateUsagePlansAndApisList(true)) }\n  componentDidUpdate() { this.updateApi() }\n\n  updateApi = () => {\n    return getApi(this.props.match.params.apiId || 'ANY', true, this.props.match.params.stage)\n      .then(api => {\n        if (api) {\n          let swaggerUiConfig = {\n            dom_id: '#swagger-ui-container',\n            plugins: [SwaggerLayoutPlugin],\n            supportedSubmitMethods: [],\n            spec: api.swagger,\n            onComplete: () => {\n              if (store.apiKey)\n                uiHandler.preauthorizeApiKey(\"api_key\", store.apiKey)\n            }\n          }\n          if (isAuthenticated()) {\n            delete swaggerUiConfig.supportedSubmitMethods\n          }\n          let uiHandler = SwaggerUI(swaggerUiConfig)\n        }\n      })\n  }\n\n  render() {\n    let errorHeader\n    let errorBody \n\n    if (store.apiList.loaded) {\n      if (!store.apiList.apiGateway.length && !store.apiList.generic.length) {\n        errorHeader = `Geen API's beschikbaar`\n        errorBody = `Momenteel zijn er nog geen API's beschikbaar voor je account. Contacteer de beheerder.`\n      } else if (!store.api) {\n        errorHeader = `Onbekende API`\n        errorBody = `De geselecteerde API bestaat niet.`\n      }\n    }\n\n    return (\n      <div>\n        <FunctionalNavigation />\n\n        <div className=\"vl-page\">\n          <main id=\"main\" itemProp=\"mainContentOfPage\" role=\"main\" tabIndex=\"0\" className=\"vl-main-content\">\n            <div className=\"vl-region vl-region--no-space-bottom\">\n              <div className=\"vl-layout\">\n                <header className=\"wp-pt-heading\">\n                  <div className=\"wp-pt-heading__parent\">\n                    <Link to=\"/\" className=\"router-link-active vl-link vl-link--bold\">Overzicht</Link>\n                  </div>\n                  <div className=\"wp-pt-heading__title-wrapper\">\n                    <h1 className=\"wp-pt-heading__title vl-title vl-title--h1\">Aanbod</h1>\n                  </div>\n                  <div className=\"vl-grid\">\n                    <div className=\"vl-col--9-12 vl-col--12-12--s\">\n                      <div className=\"wp-pt-heading__content\">\n                        <div className=\"vl-typography\">\n                          <p className=\"vl-introduction\">\n                            Ontdek hier ons volledig aanbod van <strong>Informatie Vlaanderen</strong> API's.\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </header>\n              </div>\n            </div>\n\n            <div className=\"vl-region\">\n              <div className=\"vl-layout\">\n                \n                <div className=\"swagger-section\" style={{ marginTop: 20 }}>\n                  <div className=\"swagger-ui-wrap\" id=\"swagger-ui-container\">\n                    {errorHeader && errorBody && (\n                      <div className=\"vl-alert vl-alert--warning\" role=\"alert\">\n                        <div className=\"vl-alert__content\">\n                          <p className=\"vl-alert__title\">{errorHeader}</p>\n                          <div className=\"vl-alert__message\">\n                            <p>{errorBody}</p>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </main>\n        </div>\n      </div>\n    )\n  }\n})\n","import React, { Component } from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport { ApiManagement, SideNav } from './'\nimport { AdminRoute } from './../../';\n\nexport class Admin extends Component {\n  render() {\n    return (\n      <Router>\n        <div style={{ display: \"flex\", flex: \"1 1 auto\", overflow: \"hidden\" }}>\n          <SideNav style={{ flex: \"0 0 auto\" }} />\n          <div style={{ flex: \"1 1 auto\", overflow: 'auto' }}>\n            <AdminRoute exact path=\"/admin\" component={ApiManagement} />\n            <AdminRoute path=\"/admin/apis\" component={ApiManagement} />\n          </div>\n        </div>\n      </Router>\n    )\n  }\n}\n","import React from 'react'\n\nimport { isAdmin } from 'services/self'\n\nimport { observer } from 'mobx-react'\n\nimport { Link } from 'react-router-dom'\nimport { Menu } from 'semantic-ui-react'\n\n\nexport const SideNav = observer(() => (\n  isAdmin() &&\n  (<Menu inverted vertical borderless attached style={{ flex: \"0 0 auto\" }}>\n    <Menu.Item as={Link} to=\"/admin/apis\">API's</Menu.Item>\n  </Menu>)\n))\n","import React, { Component } from 'react'\n\nimport { Button, Table, Modal, Form, Message, Popup, Icon } from 'semantic-ui-react'\n\nimport { apiGatewayClient } from 'services/api'\nimport { getApi } from 'services/api-catalog'\nimport { store } from 'services/state'\n\nimport * as YAML from 'yamljs'\n\nimport hash from 'object-hash'\nimport { toJS } from 'mobx'\nimport { observer } from 'mobx-react'\n\nexport const ApiManagement = observer(class ApiManagement extends React.Component {\n  state = {\n    modalOpen: false,\n    errors: []\n  }\n\n  fileInput = React.createRef()\n\n  componentDidMount() {\n    this.getApiVisibility()\n  }\n\n  uploadAPISpec = (event) => {\n    event.preventDefault();\n\n    const files = this.fileInput.current.files\n    let swagger, swaggerObject, anyFailures\n\n    if (files.length > 0) {\n      this.setState(prev => ({ ...prev, errors: [] }))\n\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i]\n        const reader = new FileReader()\n\n        reader.onload = ((f) => (e) => {\n          if (f.name.includes('yaml')) {\n            swaggerObject = YAML.parse(e.target.result)\n            swagger = JSON.stringify(swaggerObject)\n          } else {\n            swaggerObject = JSON.parse(e.target.result)\n            swagger = JSON.stringify(swaggerObject)\n          }\n\n          if (!(swaggerObject.info && swaggerObject.info.title)) {\n            anyFailures = true\n            this.setState(prev => ({ ...prev, errors: [...prev.errors, file.name] }))\n            return\n          }\n\n          if (anyFailures) {\n            return\n          }\n\n          apiGatewayClient()\n            .then((app) => app.post('/admin/catalog/visibility', {}, { swagger }, {}))\n            .then((res) => {\n              if (res.status === 200) {\n                this.setState(prev => ({ ...prev, modalOpen: anyFailures, errors: anyFailures ? prev.errors : [] }))\n              }\n              setTimeout(() => this.getApiVisibility(), 2000)\n            })\n        })(file);\n        reader.readAsText(file);\n      }\n    }\n  }\n\n  deleteAPISpec = (apiId) => {\n    getApi(apiId, false, undefined, true).then(api => {\n      let _api = toJS(api),\n        myHash = hash(_api.swagger)\n\n      apiGatewayClient()\n        .then(app => app.delete(`/admin/catalog/visibility/generic/${myHash}`, {}, {}, {}))\n        .then((res) => {\n          setTimeout(() => this.getApiVisibility(), 2000)\n        })\n    })\n\n  }\n\n  getApiVisibility = () => {\n    apiGatewayClient()\n      .then(app => app.get('/admin/catalog/visibility', {}, {}, {}))\n      .then(res => {\n        if (res.status === 200) {\n          // console.log(`visibility: ${JSON.stringify(res.data, null, 2)}`)\n\n          let apiGateway = res.data.apiGateway\n          let generic = res.data.generic && Object.keys(res.data.generic)\n\n          // console.log(`generic: ${JSON.stringify(generic, null, 2)}`)\n          // console.log(`api gateway: ${JSON.stringify(apiGateway, null, 2)}`)\n\n          apiGateway.forEach(api => {\n            if (generic) {\n              generic.forEach(genApi => {\n                if (res.data.generic[`${genApi}`]) {\n                  if (\n                    res.data.generic[`${genApi}`].apiId === api.id &&\n                    res.data.generic[`${genApi}`].stage === api.stage\n                  ) {\n                    api.visibility = true\n                    delete res.data.generic[`${genApi}`]\n                  }\n                }\n              })\n            }\n          })\n\n          store.visibility = res.data\n        }\n      })\n  }\n\n  updateLocalApiGatewayApis = (apisList, updatedApi, parity) => {\n    const updatedApis = apisList.map(stateApi => {\n      if (stateApi.id === updatedApi.id && stateApi.stage === updatedApi.stage) {\n        if(parity !== undefined && (parity === true || parity === false)) {\n          stateApi.visibility = parity\n        } else {\n          stateApi.visibility = !stateApi.visibility\n        }\n      }\n      return stateApi\n    })\n\n      store.visibility = { generic: store.visibility.generic, apiGateway: updatedApis }\n  }\n\n  showApiGatewayApi = (api) => {\n    apiGatewayClient()\n      .then(app => app.post('/admin/catalog/visibility', {}, { apiKey: `${api.id}_${api.stage}`, subscribable: `${api.subscribable}` }, {}))\n      .then((res) => {\n        if (res.status === 200) {\n          this.updateLocalApiGatewayApis(store.visibility.apiGateway, api)\n        }\n      })\n  }\n\n  hideApiGatewayApi = (api) => {\n    if (!api.subscribable && !api.id && !api.stage) {\n      this.deleteAPISpec(api.genericId)\n    } else {\n      apiGatewayClient()\n        .then(app => app.delete(`/admin/catalog/visibility/${api.id}_${api.stage}`, {}, {}, {}))\n        .then((res) => {\n          if (res.status === 200) {\n            this.updateLocalApiGatewayApis(store.visibility.apiGateway, api)\n          }\n        })\n    }\n  }\n\n    showAllApiGatewayApis = (usagePlan) => {\n      Promise.all(usagePlan.apis.map((api) =>\n          apiGatewayClient()\n            .then(app => app.post('/admin/catalog/visibility', {}, {\n              apiKey: `${api.id}_${api.stage}`,\n              subscribable: `${api.subscribable}`\n            }, {}))\n            .then(res => { res.api = api; return res })\n      )).then((promises) => {\n        promises.forEach((result) => {\n          if (result.status === 200) {\n            this.updateLocalApiGatewayApis(store.visibility.apiGateway, result.api, true)\n          }\n        })\n      })\n    }\n\n    hideAllApiGatewayApis = (usagePlan) => {\n      Promise.all(usagePlan.apis.map((api) =>\n        apiGatewayClient()\n          .then(app => app.delete(`/admin/catalog/visibility/${api.id}_${api.stage}`, {}, {}, {}))\n          .then(res => { res.api = api; return res })\n      )).then((promises) => {\n        promises.forEach((result) => {\n          if (result.status === 200) {\n            this.updateLocalApiGatewayApis(store.visibility.apiGateway, result.api, false)\n          }\n        })\n      })\n    }\n\n  updateApiGatewayApi = (api) => {\n    apiGatewayClient()\n      .then(app => app.post('/admin/catalog/visibility', {}, { apiKey: `${api.id}_${api.stage}`, subscribable: `${api.subscribable}` }, {}))\n  }\n\n  isSdkGenerationConfigurable = (api) => {\n    return api.visibility\n  }\n\n  toggleSdkGeneration = (apisList, updatedApi) => {\n    apiGatewayClient()\n      .then(app => {\n        if (updatedApi.sdkGeneration) {\n          return app.delete(`/admin/catalog/${updatedApi.id}_${updatedApi.stage}/sdkGeneration`, {}, {}, {})\n        } else {\n          return app.put(`/admin/catalog/${updatedApi.id}_${updatedApi.stage}/sdkGeneration`, {}, {}, {})\n        }\n      })\n      .then(res => {\n        if (res.status === 200) {\n          const updatedApis = apisList.map(stateApi => {\n            if (stateApi.id === updatedApi.id && stateApi.stage === updatedApi.stage) {\n              stateApi.sdkGeneration = !stateApi.sdkGeneration\n            }\n            return stateApi\n          })\n\n          store.visibility.apiGateway = updatedApis\n        }\n      })\n  }\n\n  tableSort = (first, second) => {\n    if (first.name !== second.name) {\n      return first.name.localeCompare(second.name)\n    } else {\n      return first.stage.localeCompare(second.stage)\n    }\n  }\n\n  genericTableSort = (firstIndex, secondIndex) => {\n    const list = store.visibility.generic\n\n    if (list[firstIndex].name !== list[secondIndex].name) {\n      list[firstIndex].name.localeCompare(list[secondIndex].name)\n    } else {\n      // compare by their index, which happens to be their id\n      return firstIndex.localeCompare(secondIndex)\n    }\n  }\n\n  usagePlanSort = (first, second) => {\n    if (first.name !== second.name) {\n      return first.name.localeCompare(second.name)\n    } else {\n      return first.id.localeCompare(second.id)\n    }\n  }\n\n  renderHeaderVisibilityButton(usagePlan) {\n    let numberOfApis = usagePlan.apis.length,\n        numberofVisibleApis = usagePlan.apis.filter((api) => api.visibility === true).length\n\n    // every API is visible, show the \"disable\" button\n    if(numberOfApis === numberofVisibleApis) {\n      return (\n        <Button basic\n                color='green'\n                style={{'backgroundColor': 'white', width: '100%'}}\n                onClick={() => this.hideAllApiGatewayApis(usagePlan)}>\n            True\n        </Button>\n      )\n    }\n    // every API is not visible, show the current state (False) and enable on click\n    else if(numberofVisibleApis === 0) {\n      return (\n        <Button basic\n                color='red'\n                style={{'backgroundColor': 'white', width: '100%'}}\n                onClick={() => this.showAllApiGatewayApis(usagePlan)}>\n            False\n        </Button>\n      )\n    }\n    // some APIs are visible, some are hidden; show the current state (Partial, with a warning) and enable on click\n    else {\n      return (\n      <Popup content='Users subscribed to any of the APIs in this usage plan will have a valid API key for all APIs in this usage plan, even those that are not visible!' trigger={<Button basic\n                              color='yellow'\n                              style={{ backgroundColor: 'white', width: '100%', paddingLeft: '1em', paddingRight: '1em', minWidth: '88px' }}\n                              onClick={() => this.showAllApiGatewayApis(usagePlan)}>\n        Partial <Icon name='warning sign' style={{ paddingLeft: '5px' }} />\n      </Button>} />\n      )\n    }\n  }\n\n  sortByUsagePlan() {\n    if(!store.visibility.apiGateway)\n      return this.renderNoApis()\n\n    let usagePlans =\n      store.visibility.apiGateway\n        .filter((api) => api.usagePlanId)\n        .reduce((accumulator, api) => {\n          if(!accumulator.find((usagePlan) => api.usagePlanId === usagePlan.id)) {\n            accumulator.push({ id: api.usagePlanId, name: api.usagePlanName })\n          }\n          return accumulator\n        }, [])\n        .sort(this.usagePlanSort)\n        .map((usagePlan) => {\n          return { ...usagePlan, apis: store.visibility.apiGateway.filter((api) => api.usagePlanId === usagePlan.id).sort(this.tableSort) }\n        }),\n    unsubscribable =\n      store.visibility.apiGateway\n        .filter((api) => !api.usagePlanId)\n          .sort(this.tableSort)\n\n    return (\n      <React.Fragment>\n        {usagePlans.map((usagePlan, i) => {\n          return (\n            <React.Fragment>\n              {this.renderHeader(usagePlan, i)}\n              {usagePlan.apis.map((api) => api.id !== window.config.restApiId && this.renderRow(api, i))}\n            </React.Fragment>\n          )\n        })}\n        <Table.Row style={{'backgroundColor': '#1678c2', 'color': 'white'}}>\n          <Table.Cell colSpan='6'>\n            <b>Not Subscribable</b> <i>No Usage Plan</i>\n          </Table.Cell>\n        </Table.Row>\n        {unsubscribable.map((api) => api.id !== window.config.restApiId && this.renderRow(api))}\n      </React.Fragment>\n    )\n  }\n\n  renderNoApis = () => {\n    return (\n      <Table.Row>\n        <Table.Cell colSpan='4'>\n          No APIs found\n        </Table.Cell>\n      </Table.Row>\n    )\n  }\n\n  renderHeader(usagePlan, i) {\n    return (\n      <Table.Row key={i} style={{'backgroundColor': '#1678c2', 'color': 'white'}}>\n        <Table.Cell colSpan='3'>\n          <b>{usagePlan && usagePlan.name}</b> <i>Usage Plan</i>\n        </Table.Cell>\n        <Table.Cell>\n            {this.renderHeaderVisibilityButton(usagePlan)}\n        </Table.Cell>\n        <Table.Cell colSpan='2'>\n\n        </Table.Cell>\n      </Table.Row>\n    )\n  }\n\n  renderRow(api) {\n    return (\n      <Table.Row>\n        <Table.Cell collapsing>{api.name}</Table.Cell>\n        <Table.Cell>{api.stage}</Table.Cell>\n        <Table.Cell>{api.subscribable ? 'Subscribable' : 'Not Subscribable'}</Table.Cell>\n        <Table.Cell>\n          <Button basic\n                  color={api.visibility ? 'green' : 'red'}\n                  style={{ width: '100%' }}\n                  onClick={() => api.visibility ? this.hideApiGatewayApi(api) : this.showApiGatewayApi(api)}>\n              {api.visibility ? 'True' : 'False'}\n          </Button>\n        </Table.Cell>\n        <Table.Cell>\n          <Button basic\n                  color='blue'\n                  disabled={!api.visibility}\n                  style={{ width: '100%' }}\n                  onClick={() => this.updateApiGatewayApi(api)}>\n            Update\n          </Button>\n        </Table.Cell>\n        <Table.Cell>\n          <Button basic\n              // color={api.sdkGeneration ? 'green' : 'red'}\n                  color='blue'\n                  style={{ width: '100%' }}\n                  disabled={!api.visibility || !this.isSdkGenerationConfigurable(api)}\n                  onClick={() => this.toggleSdkGeneration(store.visibility.apiGateway, api)}>\n              {api.sdkGeneration ? 'Enabled' : 'Disabled'}\n          </Button>\n        </Table.Cell>\n      </Table.Row>\n    )\n  }\n\n  render() {\n    return (\n      <div style={{ display: 'flex', width: '100%' }}>\n        <div style={{ padding: '2em' }}>\n          <Table celled collapsing>\n            <Table.Header fullWidth>\n              <Table.Row>\n                <Table.HeaderCell colSpan='6'>API Gateway APIs</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Header fullWidth>\n              <Table.Row>\n                <Table.HeaderCell collapsing sorted=\"ascending\">API Name</Table.HeaderCell>\n                <Table.HeaderCell>Stage</Table.HeaderCell>\n                <Table.HeaderCell>API Type</Table.HeaderCell>\n                <Table.HeaderCell>Displayed</Table.HeaderCell>\n                <Table.HeaderCell>Update</Table.HeaderCell>\n                <Table.HeaderCell>Allow Generating SDKs</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              { this.sortByUsagePlan() }\n            </Table.Body>\n          </Table>\n        </div>\n\n        <div style={{ padding: '2em' }}>\n          <Table celled collapsing>\n            <Table.Header fullWidth>\n              <Table.Row>\n                <Table.HeaderCell colSpan='4'>Generic APIs</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Header fullWidth>\n              <Table.Row>\n                <Table.HeaderCell colSpan='2'>\n                  <Modal\n                    closeIcon\n                    closeOnEscape={true}\n                    closeOnDimmerClick={true}\n                    onClose={() => this.setState((prev) => ({ ...prev, modalOpen: false }))}\n                    trigger={\n                      <Button floated='right' onClick={() => this.setState((prev) => ({ ...prev, modalOpen: true }))}>\n                        Add API\n                    </Button>}\n                    open={this.state.modalOpen}\n                  >\n                    <Modal.Header>Select .JSON, .YAML, or .YML files</Modal.Header>\n                    <Modal.Content>\n                      <React.Fragment>\n                        <Form onSubmit={this.uploadAPISpec}>\n                          <Form.Field>\n                            <label htmlFor=\"files\">Select Files:</label>\n                            <input type=\"file\" id=\"files\" name=\"files\" accept=\".json,.yaml,.yml\" multiple={true} ref={this.fileInput} />\n                          </Form.Field>\n                          {!!this.state.errors.length &&\n                            <Message size='tiny' color='red' list={this.state.errors} header=\"These files are not parseable or do not contain an api title:\" />\n                          }\n                          <br />\n                          <Button type='submit'>Upload</Button>\n                        </Form>\n                      </React.Fragment>\n                    </Modal.Content>\n                  </Modal>\n                </Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Header fullWidth>\n              <Table.Row>\n                <Table.HeaderCell collapsing sorted=\"ascending\">API Name</Table.HeaderCell>\n                <Table.HeaderCell>Delete</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              {store.visibility.generic ? Object.keys(store.visibility.generic).sort(this.genericTableSort).map((apiId, i) =>\n                (\n                  <Table.Row key={i}>\n                    <Table.Cell collapsing>{store.visibility.generic[apiId].name}</Table.Cell>\n                    <Table.Cell>\n                      <Button basic\n                        color='red'\n                        onClick={() => this.deleteAPISpec(apiId)}>\n                        Delete\n                      </Button>\n                    </Table.Cell>\n                  </Table.Row>\n                )) : (\n                  <Table.Row >\n                    <Table.Cell colSpan='4'>\n                      No APIs found\n                    </Table.Cell>\n                  </Table.Row>\n                )}\n            </Table.Body>\n          </Table>\n        </div>\n      </div>\n    );\n  }\n})\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport React from 'react'\r\nimport { observer } from 'mobx-react'\r\nimport './Header.scss';\r\n\r\nexport const Header = observer(\r\n  class Header extends React.Component {\r\n    render() {\r\n      return <header id=\"vlaanderen-top\">\r\n        <div id=\"vlaanderen-navigation\">\r\n          <a id=\"vlaanderen-link\" href=\"https://www.vlaanderen.be/nl\" target=\"_self\">\r\n            <div id=\"vlaanderen-top-logo\"></div>\r\n            <span>Vlaanderen</span>\r\n          </a>\r\n          <div id=\"home-navigation\">\r\n            <a id=\"home-link\" href=\"https://basisregisters.vlaanderen.be\">\r\n              <span>Basisregisters Vlaanderen</span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    }\r\n  }\r\n)\r\n\r\nexport default Header\r\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport React from 'react'\r\nimport { observer } from 'mobx-react'\r\nimport './Footer.scss';\r\n\r\nexport const Footer = observer(\r\n  class Footer extends React.Component {\r\n    render() {\r\n      var useTag = '<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#vlaanderen-logo\"></use>';\r\n\r\n      var version = window.baseRegistriesVersion ? \", versie \" + window.baseRegistriesVersion : \", developer versie\";\r\n\r\n      return <footer>\r\n        <div style={{ height: 0, width: 0, position: 'absolute', visibility: 'hidden', display: 'none' }}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"vlaanderen-logo\" viewBox=\"0 0 19.61 31.05\"><title>vlaanderen-logo</title><path data-name=\"Logo Vlaanderen\" d=\"M19.61 16c-1.08-.82-1.59 0-2.27 0s-1.12-1-1.56-.75c-.85.43.34 2 .86 2.27a12.51 12.51 0 0 0 1.18.59 1.72 1.72 0 0 1 1 1.55 3 3 0 0 1 0 .75c-.31 1.32-2.64 2.52-4 1.61a3 3 0 0 1-1.4-2c-.36-1.73-1.62-3-2-4.7-.25-1-.43-2.12-.7-3.15S10.17 10 9.94 9A27.44 27.44 0 0 0 9 5.92C7.71 2.61 7.14 2.85 7.14 2.85s.46.92 2.15 9A47.8 47.8 0 0 0 10.42 17c.16.42.44 1.32.62 1.72.54 1.16 2 2.92 2.05 4.51.05.92.16 1.68.18 2.37a7.37 7.37 0 0 0 .24 1.4c.35 1 3.14 4.09 6.1 4.09v-2.41a10.88 10.88 0 0 1-5.79-1.82 6.37 6.37 0 0 1 .35-1.7 2.78 2.78 0 0 1 2.39-1.94 17.91 17.91 0 0 1 3 .31V16zM6.82 7.36c-.11 1.77-2.87 4.2-3.73 5.75A11.43 11.43 0 0 0 2 15.95a7.53 7.53 0 0 0 .62 4.67c.91 2.18-.12 3 .59 2.54.88-.72.75-2.39.68-3.43a14.77 14.77 0 0 1 0-2.82 13.29 13.29 0 0 1 2.41-5.33 4.84 4.84 0 0 0 .52-4.22m.56 5s.29 1.4-1 5c-3.26 9.45 3 10.34 4.74 12.56 0 0 .69-1-2.14-4-1-1.12-2-3.6-1.15-7.15 1.17-5.13-.5-6.39-.5-6.39M1.21 6.2A4.53 4.53 0 0 1 1 4.7c.2-2.22 2.23-3.12 2.73-3.45A2.7 2.7 0 0 0 4.76 0a3 3 0 0 1-1.21 3.67A6.06 6.06 0 0 0 1.21 6.2m5.11-2.15c.11.23 1 1.45-2.48 4.27s-2.36 4.84-2.36 4.84-3.66-2 .56-5.53 3.35-4.2 3.35-4.2a1.05 1.05 0 0 1 .93.63m4.46 1.08c.59.08 1 1.92 2.35 2.32 1 .29 2.08.13 2.32.74a.52.52 0 0 0 .37.92c.39-1.12.58-5.24-5.03-3.98zm1.86.86c0-.13.12 0 .27-.12a1.66 1.66 0 0 1 .59-.48 1 1 0 0 1 .62 0c.12 0 0 .33 0 .4s-.74-.09-.74.32c0 .67.91 0 1.38 0 .23 1.64-2.48 1.19-2.08-.16z\"></path></symbol></svg>\r\n        </div>\r\n        <div id=\"vlaanderen-footer\">\r\n          <div id=\"vlaanderen-footer-logo\">\r\n            <svg dangerouslySetInnerHTML={{__html: useTag }} />\r\n            <div id=\"vlaanderen-footer-logo-text\">\r\n              <div id=\"vlaanderen-footer-logo-title\">Vlaanderen</div>\r\n              <div id=\"vlaanderen-footer-logo-tagline\">verbeelding werkt</div>\r\n            </div>\r\n          </div>\r\n          <div id=\"vlaanderen-footer-info\">\r\n              <div id=\"vlaanderen-footer-info-title\">Dit is een officiële website van de Vlaamse overheid</div>\r\n              <div id=\"vlaanderen-footer-info-publisher\">\r\n                <span>uitgegeven door&nbsp;</span>\r\n                <span itemProp=\"publisher\" itemScope=\"\" itemType=\"http://schema.org/Organization\">\r\n                  <a itemProp=\"url\" href=\"https://www.vlaanderen.be/nl/contact/adressengids/diensten-van-de-vlaamse-overheid/administratieve-diensten-van-de-vlaamse-overheid/beleidsdomein-kanselarij-en-bestuur/agentschap-informatie-vlaanderen\" target=\"_self\">\r\n                    <span itemProp=\"name\">het Agentschap Informatie Vlaanderen</span>\r\n                  </a><span id=\"vbrVersion\">{version}</span>\r\n                </span>\r\n              </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    }\r\n  }\r\n)\r\n\r\nexport default Footer\r\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Segment, Message } from 'semantic-ui-react'\n\nimport { observer } from 'mobx-react'\n\nimport { store } from 'services/state'\n\nexport default observer(() => {\n  return (\n    <Segment basic style={{ position: \"absolute\", right: 0, margin: 0, top: \"56px\", display: \"flex\", flexDirection: \"column\" }}>\n      {store.notifications.map(notify => {\n        return <Message\n          {...notify}\n          onDismiss={() => clearNofication(notify)}\n          style={{ margin: 0, marginBottom: \"15px\" }} />\n      })}\n    </Segment>\n  )\n})\n\nexport function addNotification({ compact=true, negative=true, floating=true, icon=\"warning sign\", header=\"Error\", content=\"An unknown error has occurred.\" }) {\n  store.notifications.push({\n    compact, negative, floating, icon, header, content\n  })\n}\n\nfunction clearNofication(notification) {\n  store.notifications = store.notifications.filter(notify => notify !== notification)\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { apiGatewayClient } from 'services/api'\nimport { store } from 'services/state'\n\nimport React from 'react'\n\nimport { Loader, Button, Header, Modal, Icon, Form } from 'semantic-ui-react'\nimport { modal } from 'components/Modal'\nimport { addNotification } from 'components/AlertPopup'\n\nimport { observer } from 'mobx-react'\n\nimport _ from 'lodash'\n\n/**\n * This button is used in the `InfoReplacement` component of the SwaggerUiLayout to add the GetSdkButton directly into the SwaggerUi UI.\n */\nexport const GetSdkButton = observer(() => {\n  return (\n    <span>\n      <Dropdown text='Download SDK' pointing className='link item'>\n        {sdkTypes.map((type) => {\n          return <div className=\"item\" key={type.id} onClick={() => confirmDownload(type)}>\n            {type.friendlyName}\n          </div>\n        })}\n      </Dropdown>\n      {store.api.downloadingSdk && <Loader active inline size=\"tiny\" />}\n    </span>\n  )\n})\n\nclass Dropdown extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = { visible: false }\n    this.button = +(new Date()) + '-dropdown-clickable' // we've using this class to exclude certain elements from hiding\n\n    document.addEventListener('click', this.hideDropdown)\n  }\n\n  toggleDropdown = () => this.setState(prevState => ({ ...prevState, visible: !prevState.visible }))\n  hideDropdown = event => {\n    if (!event.target.classList.contains(this.button))\n      this.setState(prevState => ({ ...prevState, visible: false }))\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideDropdown)\n  }\n\n  render() {\n    return (\n      <span onClick={this.toggleDropdown} className={\"ui button pointing dropdown link item \" + this.button + (this.state.visible ? \" active\" : \"\")}>\n        {this.props.text}\n        <i className={\"dropdown icon \" + this.button}></i>\n        <div className={\"menu transition\" + (this.state.visible ? \" visible\" : \"\")}>\n          {this.props.children}\n        </div>\n      </span>\n    )\n  }\n}\n\nfunction confirmDownload(type) {\n  if (type.configurationProperties.length)\n    modal.open(GetSdkModal, { type })\n  else\n    getSdk(type.id)\n}\n\n/**\n * This modal is included by the modals component, which also provides the default open/close controls for all modals.\n */\nexport class GetSdkModal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    // generate a null state value for each required property (to validate against)\n    let fields = props.type.configurationProperties.reduce((obj, property) => {\n      if (property.required)\n        obj[property.name] = null\n      return obj\n    }, {})\n\n    this.state = {\n      fields\n    }\n  }\n\n  // this function returns a prop directly\n  // it's intended to be used like <Component {...this.canSubmit()} />\n  isDisabled = () => {\n    let hasEmptyValue = !!Object.entries(this.state.fields)\n      .find(([key, value]) => !value)\n\n    return { disabled: hasEmptyValue }\n  }\n\n  handleChange = (event, { id, value }) => {\n    this.setState((prevState) => {\n      let newState = _.cloneDeep(prevState)\n      newState.fields[id] = value\n      return newState\n    })\n  }\n\n  handleSubmit = () => {\n    if (!this.isDisabled().disabled) {\n      modal.close()\n      getSdk(this.props.type.id, JSON.stringify(this.state.fields))\n    }\n  }\n\n  render() {\n    const type = this.props.type\n\n    return <>\n      <Header icon='archive' content={`Download the ${type.friendlyName} SDK`} />\n      <Modal.Content>\n        <Form onSubmit={this.handleSubmit}>\n          {type.configurationProperties.map(property => (\n            // only display required fields for now\n            property.required ? <Form.Input\n              key={property.name}\n              id={property.name}\n              label={`${property.friendlyName} (required)`}\n              placeholder={property.friendlyName}\n              onChange={this.handleChange} /> : null\n          ))}\n        </Form>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button basic color='red' onClick={modal.close}>\n          <Icon name='remove' /> Cancel\n      </Button>\n        <Button color='green' {...this.isDisabled()} onClick={this.handleSubmit}>\n          <Icon name='checkmark' /> Download\n      </Button>\n      </Modal.Actions>\n    </>\n  }\n}\n\nconst sdkTypes = [\n  {\n    id: \"android\",\n    friendlyName: \"Android\",\n    description: \"\",\n    configurationProperties: [\n      {\n        name: \"groupId\",\n        friendlyName: \"Group ID\",\n        description: \"\",\n        required: true\n      }, {\n        name: \"invokerPackage\",\n        friendlyName: \"Invoker package\",\n        description: \"\",\n        required: true\n      }, {\n        name: \"artifactId\",\n        friendlyName: \"Artifact ID\",\n        description: \"\",\n        required: true\n      }, {\n        name: \"artifactVersion\",\n        friendlyName: \"Artifact version\",\n        description: \"\",\n        required: true\n      },\n    ]\n  },\n  {\n    id: \"javascript\",\n    friendlyName: \"JavaScript\",\n    description: \"\",\n    configurationProperties: []\n  },\n  {\n    id: \"ios-objective-c\",\n    friendlyName: \"iOS (Objective-C)\",\n    description: \"\",\n    configurationProperties: [\n      {\n        name: \"classPrefix\",\n        friendlyName: \"Prefix\",\n        description: \"\",\n        required: true\n      },\n    ]\n  },\n  {\n    id: \"ios-swift\",\n    friendlyName: \"iOS (Swift)\",\n    description: \"\",\n    configurationProperties: [\n      {\n        name: \"classPrefix\",\n        friendlyName: \"Prefix\",\n        description: \"\",\n        required: true\n      },\n    ]\n  },\n  {\n    id: \"java\",\n    friendlyName: \"Java\",\n    description: \"Java SDK generator for API Gateway APIs\",\n    configurationProperties: [\n      {\n        name: \"service.name\",\n        friendlyName: \"Service Name\",\n        description: \"Name of the service which is used to derive the Java interface name for your client\",\n        required: true\n      },\n      {\n        name: \"java.package-name\",\n        friendlyName: \"Java Package Name\",\n        description: \"Name of the Java package your code will be generated under\",\n        required: true\n      },\n      {\n        name: \"java.build-system\",\n        friendlyName: \"Java Build System\",\n        description: \"Build system to setup for project; Currently supported: maven, gradle\",\n        required: false\n      },\n      {\n        name: \"java.group-id\",\n        friendlyName: \"Java Group Id\",\n        description: \"Group id for your Maven or Gradle project. Defaults to package name\",\n        required: false\n      },\n      {\n        name: \"java.artifact-id\",\n        friendlyName: \"Java Artifact Id\",\n        description: \"Artifact Id for your Maven project or project name for your Gradle project. Defaults to service name\",\n        required: false\n      },\n      {\n        name: \"java.artifact-version\",\n        friendlyName: \"Java Artifact Version\",\n        description: \"Version of your Maven or Gradle project. Defaults to 1.0-SNAPSHOT\",\n        required: false\n      },\n      {\n        name: \"java.license-text\",\n        friendlyName: \"Source Code License Text\",\n        description: \"Customer provided license to inject into source file headers\",\n        required: false\n      }\n    ]\n  },\n  {\n    id: \"ruby\",\n    friendlyName: \"Ruby\",\n    description: \"Ruby SDK generator for API Gateway APIs\",\n    configurationProperties: [\n      {\n        name: \"service.name\",\n        friendlyName: \"Service Name\",\n        description: \"Name of the service which is used to derive the name for your client\",\n        required: true\n      },\n      {\n        name: \"ruby.gem-name\",\n        friendlyName: \"Ruby Gem Name\",\n        description: \"Name of the Ruby gem your code will be generated under\",\n        required: false\n      },\n      {\n        name: \"ruby.gem-version\",\n        friendlyName: \"Ruby Gem Version\",\n        description: \"Version number for your service gem. Defaults to 1.0.0\",\n        required: false\n      }\n    ]\n  }\n]\n\n/**\n * \n * Let's talk about this for a moment. For some reason, passing data through the server adds (or removes?) \n * an unknown layer of encoding. To get around this, we're converting the file to a datauri on the backend, \n * then sending that through. Kinda unfortunate, because the datauri is larger than the actual encoded file.\n * \n * Eventually, this encoding should be uncovered, and removed or worked around. Once we do that, we will \n * need to switched to requesting a blob, then use a file reader to read the Blob. For now, I'm leaving those \n * in comments so we know how.\n * \n */\n\nfunction getSdk(sdkType, parameters = \"{}\") {\n  let apiId = store.api.apiId || store.api.id\n  let stageName = store.api.stage\n\n  store.api.downloadingSdk = true\n\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get(`/catalog/${apiId}_${stageName}/sdk`, { sdkType }, {}, {\n      queryParams: { parameters },\n      // leaving this as a comment so we know how to switch to a file in the future\n      // config: { responseType: \"blob\" }\n    }))\n    .then(({ data, ...rest }) => {\n      downloadFile(data, `${apiId}_${stageName}-${sdkType}.zip`)\n    })\n    .catch(({ data } = {}) => {\n      addNotification({ header: \"An error occurred while attempting to download the SDK.\", content: data.message })\n    })\n    .finally(() => {\n      store.api.downloadingSdk = false\n    })\n}\n\nfunction downloadFile(dataUri, fileName) {\n  // leaving this as a comment so we know how to switch to a file in the future\n  // const reader = new FileReader()\n  // reader.onloadend = () => {\n  const downloadLinkElement = document.createElement('a')\n  downloadLinkElement.setAttribute('href', dataUri)\n  downloadLinkElement.setAttribute('download', fileName)\n  downloadLinkElement.style.display = 'none'\n\n  document.body.appendChild(downloadLinkElement)\n  downloadLinkElement.click()\n  document.body.removeChild(downloadLinkElement)\n  // }\n  // reader.readAsDataURL(data)\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Modal } from 'semantic-ui-react'\nimport { GetSdkModal } from './GetSdk';\n\n/**\n * For the time being, this can only be used once. I know this is a bad practice, but this is both in the interest of time and user experience. If we really want more than one modal at once, we can revisit in the future. For now, I want it to be hard to make multiple at once.\n */\nexport default class GlobalModal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      open: false,\n      modalProps: {},\n      modalBody: null\n    }\n\n    modal.open = this.openModal.bind(this)\n    modal.close = this.closeModal.bind(this)\n  }\n\n  closeModal = () => {\n    this.setState({ open: false })\n  }\n\n  openModal = (modalBody, modalProps) => {\n    this.setState({\n      modalBody,\n      modalProps,\n      open: true,\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <Modal {...this.state.modalProps} open={this.state.open}>\n          {this.state.modalBody ? <this.state.modalBody {...this.state.modalProps} /> : null}\n        </Modal>\n      </>\n    )\n  }\n}\n\n// the modal controller\n// start with noop modals\nexport const modal = {\n  open: () => { },\n  close: () => { }\n}\n\n\n\n","import { apiGatewayClient } from './api'\n\nexport const submitFeedback = (message) => {\n  return apiGatewayClient()\n          .then(client => {\n            return client.post('/feedback', {}, { message }, {})\n          })\n}\n","import React from 'react'\nimport { Button, Form, Modal, TextArea, Message } from 'semantic-ui-react'\nimport { submitFeedback } from 'services/feedback'\n\nconst initialState = {\n  message: '',\n  formOpen: false,\n  feedbackSubmitted: false\n}\n\nclass Feedback extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.state = initialState\n  }\n\n  openModal = () => {\n    this.setState({\n      formOpen: true\n    })\n  }\n\n  closeModal = () => {\n    this.setState(initialState)\n  }\n\n  handleSubmit = () => {\n    const { message } = this.state\n    submitFeedback(message).then(() => {\n      this.setState({\n        feedbackSubmitted: true\n      })\n    })\n  }\n\n  render() {\n    const { \n      message,\n      formOpen,\n      feedbackSubmitted\n    } = this.state\n    \n    return (\n      <Modal \n        closeIcon\n        centered={false}\n        size='tiny' \n        open={formOpen}\n        onClose={this.closeModal}\n        trigger={\n          <div style={{ \n            display: 'block',\n            position: 'fixed', \n            top: '80%',\n            right: '-62px', // Adjusted for rotation\n            transform: 'rotate(90deg)'\n          }}>\n            <Button style={{\n              borderTopLeftRadius: '0',\n              borderTopRightRadius: '0'\n            }} onClick={this.openModal}><i className=\"envelope outline icon\"></i>Got an opinon?</Button>\n          </div>\n        }>\n        <Modal.Header>Let us know!</Modal.Header>\n        <Modal.Content>\n          {!feedbackSubmitted &&\n            <Form>\n              <Form.Field>\n                <TextArea value={message} onChange={(e) => this.setState({ message: e.target.value})} />\n              </Form.Field>\n              <Button type='submit' positive onClick={this.handleSubmit}>Submit</Button>\n            </Form>\n          }\n          {feedbackSubmitted &&\n            <Message positive>\n              <p>Thanks for your feedback</p>\n            </Message>\n          }\n        </Modal.Content>\n      </Modal>\n    )\n  }\n}\n\nexport default Feedback\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Link } from 'react-router-dom'\n\n// semantic-ui\nimport { Menu, Loader } from 'semantic-ui-react'\n\n// store\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state'\n\n// utilities\nimport _ from 'lodash'\n\nfunction isActive(apiId, selectedApiId, stage, selectedStage) {\n  if (!selectedStage) return (selectedApiId) ? apiId === selectedApiId : false\n  return (selectedApiId) ? apiId === selectedApiId && stage === selectedStage : false\n}\n\nexport default observer(function ApisMenu(props) {\n  const loadingApis = !store.apiList.loaded\n  const hasGatewayApis = !!_.get(store, 'apiList.apiGateway.length')\n  const hasGenericApis = !!_.get(store, 'apiList.generic.length')\n\n  // either grab the selectedApiId from the path OR\n  // grab it from the first apiGateway api OR\n  // grab it from the first generic api\n  let selectedApiId = (\n    this.props.path.params.apiId ||\n    (hasGatewayApis && store.apiList.apiGateway[0].id) ||\n    (hasGenericApis && store.apiList.generic[0].id)\n  )\n\n  if (props.path.url === '/apis/search') {\n    selectedApiId = false\n  }\n\n  let selectedStage= ( this.props.path.params.stage || (hasGatewayApis && store.apiList.apiGateway[0].stage) )\n\n  // If we're still loading, display a spinner.\n  // If we're not loading, and we don't have any apis, display a message.\n  // If we're not loading, and we have some apis, render the appropriate api subsections for apiGateway and generic apis \n  return (\n    <Menu inverted vertical attached style={{ margin: 0, borderRadius: 0, flex: \"0 0 auto\", position: \"relative\", overflowY: \"scroll\" }} {...this.props}>\n      {loadingApis && <Loader active />}\n      {(hasGatewayApis || hasGenericApis) ? (\n        <React.Fragment>\n          <Menu.Item key=\"search\" as={Link} to=\"/apis/search\" active={props.path.url === '/apis/search'}>Search APIs</Menu.Item>\n          {hasGatewayApis && <ApiSubsection title=\"Subscribable\" listOfApis={store.apiList.apiGateway} selectedApiId={selectedApiId} selectedStage={selectedStage} />}\n          {hasGenericApis && <GenericApiSubsection title=\"Not Subscribable\" listOfApis={store.apiList.generic} selectedApiId={selectedApiId} />}\n        </React.Fragment>\n      ) : (\n        <p style={{ padding: \"13px 16px\", color: \"whitesmoke\" }}>No APIs Published</p>\n      )}\n    </Menu>\n  )\n})\n\nfunction GenericApiSubsection({ title, listOfApis, selectedApiId }) {\n  return (\n    <React.Fragment>\n      <Menu.Header\n        style={{\n          padding: \"13px 5px 13px 16px\",\n          color: 'lightsteelblue'\n        }}\n      >\n        {title}\n      </Menu.Header>\n      {listOfApis.map(api => (\n        <Menu.Item\n          key={api.id}\n          as={Link}\n          to={`/apis/${api.id}`}\n          active={isActive(api.id.toString(), selectedApiId.toString())}\n        >\n          {api.swagger.info.title}\n        </Menu.Item>\n      ))}\n    </React.Fragment>\n  )\n}\n\nfunction ApiSubsection({ title, listOfApis, selectedApiId, selectedStage = false }) {\n  return (\n    <React.Fragment>\n      <Menu.Header\n        style={{\n          padding: \"13px 5px 13px 16px\",\n          color: 'lightsteelblue'\n        }}\n      >\n        {title}\n      </Menu.Header>\n      {listOfApis.map(api => (\n        <Menu.Item\n          key={`${api.id}_${api.stage}`}\n          as={Link}\n          to={`/apis/${api.id}/${api.stage}`}\n          active={isActive(api.id.toString(), selectedApiId.toString(), api.stage.toString(), selectedStage)}\n        >\n          {api.swagger.info.title}\n        </Menu.Item>\n      ))}\n    </React.Fragment>\n  )\n}","import React, { Component } from 'react';\n\nimport { Link } from 'react-router-dom'\nimport { Menu, Search, Grid } from 'semantic-ui-react'\n\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state'\n\nimport _ from 'lodash'\n\nimport ApisMenu from './ApisMenu'\nimport './ApiSearch.css'\n\nconst resultRenderer = (result) => (\n  <Menu.Item\n    key={result.title}\n    as={Link}\n    to={result.url}\n    style={{display: 'inline-block', width: '100%', height: '100%'}}\n  >\n    {result.title}\n  </Menu.Item>\n)\n\nexport default observer(class ApiSearch extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      search: {\n        isLoading: false,\n        value: ''\n      },\n      results: [],\n      loaded: store.apiList.loaded,\n      categories: {}\n    }\n  }\n\n  componentDidMount() {\n    this.createSearchCategories(store.apiList.apiGateway, store.apiList.generic)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.loading !== store.apiList.loaded) {\n      this.createSearchCategories(store.apiList.apiGateway, store.apiList.generic)\n      this.setState((prev) => ({ ...prev, loading: store.apiList.loaded }))\n    }\n  }\n\n  createSearchCategories = (apiGateway, generic) => {\n\n    let categories = {\n      \"Subscribable\": {\n        \"name\": \"Subscribable\",\n        \"results\": []\n      },\n      \"Not Subscribable\": {\n        \"name\": \"Not Subscribable\",\n        \"results\": []\n      }\n    }\n\n    apiGateway.forEach(({ id, stage, swagger, subscribed, usagePlan }) => {\n      categories.Subscribable.results.push({\n        url: `/apis/${id}/${stage}`,\n        title: `${swagger.info.title} - ${stage}`,\n        stage: `${stage}`,\n        searchable: `{${JSON.stringify(swagger)} ${JSON.stringify(usagePlan)} ${stage}}`\n      })\n    })\n\n    generic.forEach(({ id, swagger, stage = false, ...rest }) => {\n      let api = {\n        url: `/apis/${id}`,\n        title: `${swagger.info.title}`,\n        searchable: `${JSON.stringify(swagger)}${stage || ''}`\n      }\n      if (stage) api.stage = stage\n      categories[\"Not Subscribable\"].results.push(api)\n    })\n\n    this.setState((prev) => ({ ...prev, categories }), () => { console.log(this.state.categories) })\n  }\n\n  \n  handleResultSelect = (e, { result }) => {\n    console.log(result)\n  }\n  \n  handleSearchChange = (e, { value }) => {\n    this.setState(({ search: { isLoading, ...searchRest }, ...rest }) => ({\n      ...rest,\n      search: {\n        ...searchRest,\n        isLoading: true,\n        value\n      }}))\n    \n    setTimeout(() => {\n      if (this.state.search.value.length < 1) return this.resetComponent()\n      \n      const re = new RegExp(_.escapeRegExp(this.state.search.value), 'i')\n      const isMatch = result => re.test(result.title) || re.test(result.searchable)\n      \n      const filteredResults = _.reduce(\n        this.state.categories,\n        (memo, data, name) => {\n          const results = _.filter(data.results, isMatch)\n          if (results.length) memo[name] = { name, results } // eslint-disable-line no-param-reassign\n          \n          return memo\n        }, {})\n        \n        this.setState(({ search: { value }, ...rest }) => ({\n          ...rest,\n          search: { isLoading: false, value },\n          results: filteredResults\n        }))\n      }, 300)\n    }\n\n    resetComponent = () => this.setState((prev) => ({ ...prev, search: { isLoading: false, value: '' }, results: [] }))\n\n    render() {\n      const { isLoading, value } = this.state.search\n      const { results } = this.state\n\n      return (\n        <div style={{ display: \"flex\", flex: \"1 1 auto\", overflow: \"hidden\" }}>\n        <ApisMenu path={this.props.match} />\n        <Grid style={{padding: '2em'}}>\n          <Grid.Column>\n            <Search\n              category\n              loading={isLoading}\n              onResultSelect={this.handleResultSelect}\n              showNoResults={!isLoading}\n              onSearchChange={_.debounce(this.handleSearchChange, 500, { leading: true })}\n              results={results}\n              resultRenderer={resultRenderer}\n              value={value}\n              {...this.props}\n              />\n          </Grid.Column>\n        </Grid>\n      </div>\n    );\n  }\n})","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\n\nimport * as queryString from 'query-string'\n\n// content-fragments (import here to start this ASAP)\nimport 'services/get-fragments'\n\nimport './index.scss';\nimport './vlaanderen.scss';\nimport './vlaanderen-wp.scss';\n\n// pages\nimport Home from 'pages/Home'\nimport GettingStarted from 'pages/GettingStarted'\nimport Dashboard from 'pages/Dashboard'\nimport Apis from 'pages/Apis'\nimport { Admin } from 'pages/Admin'\n\n// components\nimport Header from 'components/header/Header'\nimport Footer from 'components/footer/Footer'\n\nimport AlertPopup from 'components/AlertPopup'\nimport GlobalModal from 'components/Modal'\nimport Feedback from './components/Feedback'\nimport ApiSearch from './components/ApiSearch'\n\nimport { isAdmin, init, login, logout } from 'services/self'\n\n// TODO: Feedback should be enabled if\n// the following is true && the current\n// user is not an administrator\nconst feedbackEnabled = window.config.feedbackEnabled\n\nexport const AdminRoute = ({component: Component, ...rest}) => (\n  <Route {...rest} render={(props) => (\n    isAdmin()\n      ? <Component {...props} />\n      : <Redirect to=\"/\" />\n  )} />\n)\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    init()\n\n    // We are using an S3 redirect rule to prefix the url path with #!\n    // This then converts it back to a URL path for React routing\n    if (window.location.hash && window.location.hash[1] === '!') {\n      const hashRoute = window.location.hash.substring(2)\n      window.history.pushState({}, 'home page', hashRoute)\n    }\n  }\n\n  render() {\n    return (\n      <BrowserRouter>\n        <React.Fragment>\n          <Header />\n          <GlobalModal />\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/index.html\" component={() => {\n              const { action } = queryString.parse(window.location.search)\n              if (action === 'login') {\n                login()\n              } else if (action === 'logout') {\n                logout()\n              }\n              return <Redirect to=\"/\" />\n            }} />\n            <Route path=\"/getting-started\" component={GettingStarted} />\n            <Route path=\"/dashboard\" component={Dashboard} />\n            <AdminRoute path=\"/admin\" component={Admin} />\n            <Route exact path=\"/apis\" component={Apis} />\n            <Route exact path=\"/apis/search\" component={ApiSearch} />\n            <Route exact path=\"/apis/:apiId\" component={Apis}/>\n            <Route path=\"/apis/:apiId/:stage\" component={Apis} />\n            <Route path=\"/login\" render={() => { login(); return <Redirect to=\"/\" /> }} />\n            <Route path=\"/logout\" render={() => { logout(); return <Redirect to=\"/\" /> }} />\n            <Route component={() => <h2>Pagina niet gevonden</h2>} />\n          </Switch>\n          <Footer />\n          {feedbackEnabled && <Feedback />}\n          <AlertPopup />\n        </React.Fragment>\n      </BrowserRouter>\n    )\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}